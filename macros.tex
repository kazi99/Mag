% Packages

% Fonts
% \usepackage{newpxtext}

% \usepackage{concmath}
% \usepackage{euler}
\usepackage[T1]{fontenc}

% \usepackage{fourier}
% \usepackage[T1]{fontenc}

% Additional packages
% \usepackage[parfill]{parskip}

\usepackage{enumitem}
% \usepackage[shortlabels]{enumitem}

\usepackage{xparse}

% Colours
\usepackage{xcolor}

\usepackage{tikz}
\usetikzlibrary{cd, babel}
\usepackage{quiver}

% For comments in pdf
\usepackage{todonotes}
% \usepackage[pdftex,dvipsnames]{xcolor}
\newcommand{\info}[1]{
    \todo[linecolor=olive,backgroundcolor=olive!25,bordercolor=olive, size=\tiny]{#1}
}

% Krajšave v slovenščini
\newcommand{\ti}{t.~i.\ }
\newcommand{\tj}{tj.\ }
\newcommand{\oz}{oz.\ }
\newcommand{\npr}{npr.\ }

% Acronyms in english
\newcommand{\ie}{i.e.\ }
\newcommand{\eg}{e.g.\ }
\newcommand{\resp}{resp.\ }
\newcommand{\cf}{cf.\ }

% Shorthands
\newcommand{\R}{\mathbf R}
\newcommand{\N}{\mathbf Z_{\geq 0}}
\newcommand{\Z}{\mathbf Z}
\newcommand{\Q}{\mathbf Q}
\newcommand{\C}{\mathbf C}
\newcommand{\OO}{\mathcal O}
\newcommand{\F}{\mathcal F}
\newcommand{\G}{\mathcal G}
\newcommand{\A}{\mathcal A}
\newcommand{\B}{\mathcal B}
\newcommand{\I}{\mathcal I}
\newcommand{\J}{\mathcal J}
\newcommand{\D}{\mathcal D}
\newcommand{\E}{\mathcal E}
\newcommand{\M}{\mathcal M}
\newcommand{\PP}{\mathbb P}
\newcommand{\KK}{\mathcal K}
% \newcommand{\k}{\texttt k}
\newcommand{\inv}{^{-1}}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}


% Isos, equivalences, ...
\newcommand{\iso}{\simeq}
\newcommand{\htpy}{\simeq}
\newcommand{\natiso}{\simeq}

% Categorical constructions
\newcommand{\im}{\operatorname{im}}
\newcommand{\coim}{\operatorname{coim}}
\newcommand{\coker}{\operatorname{coker}}
\newcommand{\colim}{\operatorname{colim}}
\newcommand{\Ob}{\operatorname{Ob}}
\renewcommand{\hom}{\mathrm{Hom}}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\id}[1]{\operatorname{id}_{#1}}
\newcommand{\op}{\text{op}}

% Specific categories
\newcommand{\Set}{\mathsf{Set}}
\newcommand{\Ab}{\mathsf{Ab}}
\renewcommand{\mod}[1]{\mathsf{Mod}_{#1}}
\newcommand{\coherent}[1]{\mathsf{coh}(#1)}
\newcommand{\quasicoh}[1]{\mathsf{qcoh}(#1)}
\newcommand{\com}{\mathsf{Ch}}

% Homotopy category of complexes
\newcommand{\K}{\mathsf{K}}
\newcommand{\kcat}[1]{\K(#1)}
\newcommand{\kplus}[1]{\K^+(#1)}
\newcommand{\kminus}[1]{\K^-(#1)}
\newcommand{\kb}[1]{\K^{b}(#1)}

% Derived categories
\newcommand{\derd}{\mathsf{D}}
\newcommand{\dercat}[1]{\derd(#1)}
\newcommand{\derplus}[1]{\derd^+(#1)}
\newcommand{\derminus}[1]{\derd^-(#1)}
\newcommand{\derb}[1]{\derd^b(#1)}

% Derived functors
\newcommand{\rderived}[2]{\mathbf{R}^{#1}#2}
\newcommand{\lderived}[2]{\mathbf{L}^{#1}#2}
\newcommand{\Ext}{\operatorname{Ext}}

% \NewDocumentCommand{\rderived}{o m}{
%     \IfValueTF{#1}{%
%         R^{#1} #2%
%     }{%
%         R #2%
%     }%
% }

\newcommand{\derivedtensor}[3]{#1 \otimes_{#3}^{\mathbf{L}} #2}
% \newcommand{\localhom}{\mathcal{H}om}
\newcommand{\localtor}[4]{\mathcal{T}or^{#4}_{#1}(#2, #3)}
\newcommand{\localext}[4]{\mathcal{E}xt^{#1}_{#4}(#2, #3)}

\NewDocumentCommand{\localhom}{ o }{%
  \IfNoValueTF{#1}%
    { % no optional arg
      \mathcal{H}om
    }%
    {
      \mathcal{H}om_{\struct{#1}}
    }
}

% Algebraic geometry
\newcommand{\struct}[1]{{\mathcal{O}_{#1}}}
\newcommand{\spec}[1]{\operatorname{Spec}#1}
\newcommand{\sch}[1]{\mathsf{Sch}_{/#1}}
\newcommand{\supp}[1]{\operatorname{supp}(#1)}
\newcommand{\tangent}[1]{\mathcal{T}_{#1}}

% Fourier-Mukai
\newcommand{\fm}[1]{\Phi_{#1}}
\newcommand{\fmkt}[1]{\Psi_{#1}}
\newcommand{\fmcoh}[1]{f^{#1}}
\newcommand{\ladj}[1]{#1_\mathrm{L}}
\newcommand{\radj}[1]{#1_\mathrm{R}}

% Cohomology
\newcommand{\td}{\operatorname{td}}
\newcommand{\tdclass}[1]{\td_{#1}}
\newcommand{\mukai}[1]{\tildi{H}(#1, \Z)}
\newcommand{\rk}[1]{\operatorname{rk}(#1)}
\newcommand{\cohom}[3]{H^{#1}(#2, #3)}
\newcommand{\pairing}[2]{\langle #1, #2 \rangle}
\newcommand{\intersect}[2]{(#1.#2)}
\newcommand{\NS}[1]{\operatorname{NS}(#1)}
\newcommand{\extendedNS}[1]{\operatorname{N}(#1)}
\newcommand{\transc}[1]{T_{#1}}
\newcommand{\pic}[1]{\operatorname{Pic}(#1)}

% K-theory
\newcommand{\kgroup}[1]{K_{\circ}(#1)}

% GAGA
\newcommand{\an}{^{\operatorname{an}}}

% Chern character
\NewDocumentCommand{\ch}{ o g }{%
  \IfNoValueTF{#1}%
    { % no optional arg
      \IfNoValueTF{#2}%
        { \mathrm{ch} }%
        { \mathrm{ch}\!\left(#2\right) }%
    }%
    { % with optional arg
      \IfNoValueTF{#2}%
        { \mathrm{ch}_{#1} }%
        { \mathrm{ch}_{#1}\!\left(#2\right) }%
    }%
}

% Chern class
\NewDocumentCommand{\cclass}{ o g }{%
  \IfNoValueTF{#1}%
    { % no optional arg
      \IfNoValueTF{#2}%
        { \mathrm{c} }%
        { \mathrm{c}\!\left(#2\right) }%
    }%
    { % with optional arg
      \IfNoValueTF{#2}%
        { \mathrm{c}_{#1} }%
        { \mathrm{c}_{#1}\!\left(#2\right) }%
    }%
}

% Stiefel-Whitney class
\NewDocumentCommand{\sw}{ o g }{%
  \IfNoValueTF{#1}%
    { % no optional arg
      \IfNoValueTF{#2}%
        { \mathrm{w} }%
        { \mathrm{w}\!\left(#2\right) }%
    }%
    { % with optional arg
      \IfNoValueTF{#2}%
        { \mathrm{w}_{#1} }%
        { \mathrm{w}_{#1}\!\left(#2\right) }%
    }%
}


% Truncations
\newcommand{\ltruncation}[1]{\tau_{\geq #1}}
\newcommand{\rtruncation}[1]{\tau_{\leq #1}}

% Lattices
\newcommand{\hyperbolic}{\mathcal U}
\newcommand{\quot}[1]{{#1}^\perp / \Z{#1}}
\renewcommand{\div}{\operatorname{div}}
\newcommand{\LK}{\Lambda_{\mathrm{K3}}}

%command for alg-closure that automatically adapts its 'bar' to the arg based on the args length (including '\')
\newcommand{\ols}[1]{\mskip.5\thinmuskip\overline{\mskip-.5\thinmuskip {#1} \mskip-.5\thinmuskip}\mskip.5\thinmuskip} % overline short
\newcommand{\olsi}[1]{\,\overline{\!{#1}}} % overline short italic

\newcommand{\tild}[1]{\mskip.5\thinmuskip\tilde{\mskip-.5\thinmuskip {#1} \mskip-.5\thinmuskip}\mskip.5\thinmuskip}
\newcommand{\tildi}[1]{\,\tilde{\!{#1}}}

% Quotient
\newcommand{\bigslant}[2]{{\raisebox{.2em}{#1}\left/\raisebox{-.2em}{#2}\right.}}



% =========== Technical stuff =========== %

% Changes section font

\usepackage{beramono}        % makes family 'fvm' available
\renewcommand{\ttdefault}{lmtt} % restore default monospace (use lmtt if you load lmodern)

\usepackage{titlesec}

% explicit selector for the Bera Mono family (local use only)
\newcommand{\sectiontt}{\fontfamily{fvm}\selectfont}

\titleformat{\section}
  {\normalfont\sectiontt\Large}{\thesection}{1em}{}
\titleformat{\subsection}
  {\normalfont\sectiontt\large}{\thesubsection}{1em}{}
\titleformat{\subsubsection}
  {\normalfont\sectiontt\normalsize}{\thesubsubsection}{1em}{}

% Theorems w/o numbers
\newtheorem*{theorem*}{Theorem}
