\section{Categorical prerequisites}
\label{Chapter: Categorical prerequisites}

The present chapter serves as a brief account of the majority of the relevant prerequisites needed to discuss derived categories.
% This section we try to make a brief account of the majority of the relevant prerequisites needed to discuss derived categories. 
In the first section we introduce additive, $k$-linear and abelian categories together with relevant functors preserving (certain parts of) their structure, following mainly \cite[\S 8]{kashiwara2006categories}. Next we build the framework for triangulated categories of which derived categories will be a special kind and also state and prove some specialized results on triangulated categories, which will be applied later on in Chapter \ref{Chapter: Derived Torelli theorem}. Lastly, we lay out the foundations on which derived categories will be constructed -- the category of complexes and its quotient homotopy category of complexes. The main pieces of literature for this part were \cite{kashiwara2006categories} and \cite[\S 1]{huybrechts2006fouriermukai}.

\subsection{Additive, $k$-linear and abelian categories}

% For this section we mainly follow \cite[\S 8]{kashiwara2006categories}. 
With $k$ we denote either a field or the ring of integers $\Z$.
A \emph{direct sum} of objects $X$ and $Y$ in a category $\mathcal C$ is an object $X \oplus Y$ together with morphisms
\begin{center}
    \begin{tabular}{c c}
        $p_X\colon X \oplus Y \to X$ & $p_Y\colon X \oplus Y \to Y$ \\
        $i_X\colon X \to X \oplus Y$ & $i_Y\colon Y \to X \oplus Y$ \\
    \end{tabular}
\end{center}
for which the pair $p_X, p_Y$ is the categorical product of $X$ and $Y$ and the pair $i_X, i_Y$ is the categorical coproduct of $X$ and $Y$. For a pair of morphisms $f_X \colon Z \to X$ and $f_Y \colon Z \to Y$ the unique induced morphism into the product $Z \to X \oplus Y$ is denoted by $(f_X, f_Y)$ and for a pair of morphisms $g_X \colon X \to Z$ and $g_Y \colon Y \to Z$, the unique induced morphism from the coproduct $X \oplus Y \to Z$ is denoted by $\langle g_X, g_Y \rangle$. For morphisms 
\begin{center}
    \begin{tabular}{c c}
        $f_{00}\colon X_0 \to Y_0$ & $f_{01}\colon X_0 \to Y_1$ \\
        $f_{10}\colon X_1 \to Y_1$ & $f_{11}\colon X_1 \to Y_1$ \\
    \end{tabular}
\end{center}
of $\mathcal C$, there are two equal\footnote{
    This stems from the fact that both morphisms fit into a diagram governed by universal properties.
} morphisms $X_0 \oplus X_1 \to Y_0 \oplus Y_1$, namely
\[
    \left(\langle f_{00}, f_{01} \rangle, \langle f_{10}, f_{11} \rangle\right) 
    \quad \text{ and } \quad 
    \left\langle (f_{00}, f_{10}), (f_{01}, f_{11})\right\rangle,
\]
which we will be denoting with the matrix
\begin{equation}
    \label{eq: matrix of morphisms}
    \begin{pmatrix}
        f_{00} & f_{01} \\
        f_{10} & f_{11}
    \end{pmatrix} \colon X_0 \oplus X_1 \to Y_0 \oplus Y_1.
\end{equation}
% In particular, when $f_{01}$ and $f_{10}$ are the morphism $0$, we will use $f_{00} \oplus f_{11} \colon X_0 \oplus X_1 \to Y_0 \oplus Y_1$ to denote the morphism \eqref{eq: matrix of morphisms}.

% For morphisms $f_{0} \colon X_0 \to Y_0$, $f_1 \colon X_1 \to Y_1$ we introduce notation $f_0 \oplus f_1 \colon X_0 \oplus X_1 \to Y_0 \oplus Y_1$ to mean either of the two (equal) morphisms 
% \[
%     \left(\langle f_0, 0 \rangle, \langle 0, f_1 \rangle\right) 
%     \quad \text{ or } \quad 
%     \left\langle (f_0, 0), (0, f_1)\right\rangle
% \]
% also depicted in matrix notation as
% \[  
%     \begin{pmatrix}
%         f_0 & 0 \\
%         0 & f_1
%     \end{pmatrix}.
% \]

% $X \xleftarrow{p_X} X \oplus Y \xrightarrow{p_Y} Y$ is the categorical product of $X$ and $Y$ and $X \xrightarrow{i_X} X \oplus Y \xleftarrow{i_Y} Y$.

\begin{definition}
    % A category $\A$ is additive (\resp $k$-linear)
    A category $\A$ is $k$-linear
    % \info{Decide on which terminology to use (everything is covered by $k$-linear...)}
    if all the Hom-sets carry the structure of 
    % abelian groups (\resp $k$-modules)
    $k$-modules 
    and the following axioms are satisfied
    \begin{enumerate}[label = \textsf{A\arabic*}]
        \item{For all objects $X$, $Y$ and $Z$ of $\A$ the composition
        \[
            \circ \colon \hom_{\A}(Y, Z) \times \hom_{\A}(X, Y) \to \hom_{\A}(X, Z)
        \] 
        is bilinear.}
        \item{There exists a \emph{zero object} $0$, for which $\Hom_\A(0,0) = 0$.}
        \item{For any two objects $X$ and $Y$ there exists a direct sum of $X$ and $Y$.} 
    \end{enumerate} 
\end{definition}

\begin{remark}
    \begin{enumerate}[label = (\roman*)]
        \item The zero object $0$ of a $k$-linear category $\A$ is both the initial and terminal object of $\A$.
        \item For morphisms $f_{0} \colon X_0 \to Y_0$, $f_1 \colon X_1 \to Y_1$ we introduce notation 
        \[
            f_0 \oplus f_1 \colon X_0 \oplus X_1 \to Y_0 \oplus Y_1
        \]
        to mean either of the two (equal) morphisms $\left(\langle f_0, 0 \rangle, \langle 0, f_1 \rangle\right)$ or $\left\langle (f_0, 0), (0, f_1)\right\rangle$.
        % \item One can recognize $k$-linear categories as the categories \emph{enriched} over the category $\mod{k}$ of $k$-modules and $k$-linear maps. 
        % \info{this point may be skipped}
    \end{enumerate}
\end{remark}

% Whenever it will be clear from context, we will sometimes omit the subindex $\A$ from $\Hom_\A(X, Y)$ for clarity and write just $\Hom(X, Y)$ instead.

\begin{definition}
    A functor $F \colon \A \to \A'$ between two 
    % additive (\resp $k$-linear)
    $k$-linear
    categories $\A$ and $\A'$ is 
    % \emph{additive} (\resp \emph{$k$-linear}) 
    \emph{$k$-linear}
    if its action on morphisms
    \[
        \hom_\A(X, Y) \to \hom_{\A'}(F(X), F(Y))
    \] 
    % is a group homomorphism (\resp $k$-linear map).
    is a $k$-linear map.
\end{definition}

\begin{remark}
    Whenever $k$ is the ring of integers $\Z$, we will instead use the terms \emph{additive category} and \emph{additive functor} to refer to $\Z$-linear categories and $\Z$-linear functors, respectively. 
    % between such categories.
    % Traditionally the term \emph{additive} is reserved for $\Z$-linear categories and $\Z$-linear functors between such categories.
\end{remark}

% Traditionally $\Z$-linear categories and functors between such categories are called \emph{additive}.

For a morphism $f\colon X \to Y$ in a $k$-linear category $\A$ recall that the \emph{kernel} of $f$ is the equalizer of $f$ and $0$ in $\A$, if it exists, and, dually, the \emph{cokernel} of $f$ is the coequalizer of $f$ and $0$, if it exists. It is well-known and easy to verify that the structure maps $\ker f \hookrightarrow X$ and $Y \twoheadrightarrow \coker f$ are a monomorphism and an epimorphism respectively. We also define the \emph{image} and the \emph{coimage} of $f$ to be
\begin{align*}
    (\im f \to Y) &:= \ker(Y \to \coker f), \\
    (X \to \coim f) &:= \coker(\ker f \to X).
\end{align*}
Notice that the image and the coimage, just like the kernel and the cokernel, are defined to be morphisms, not only objects. Sometimes these are called their \emph{structure morphisms}.

For a monomorphism $Y \hookrightarrow X$ we will sometimes by abuse of terminology call the cokernel $\coker(Y \to X)$ a \emph{quotient} and denote it by $X/Y$.

\begin{definition}
    A $k$-linear category $\A$ is called an \emph{abelian category (over $k$)} if it is closed under kernels and cokernels and satisfies axiom \ref{A4}.
    \begin{enumerate}[label = \textsf{A4}]
        \item{For any morphism $f\colon X \to Y$ in $\A$ the canonical morphism $\coim f \xrightarrow{\ \sim \ } \im f$ is an isomorphism.
        \[\begin{tikzcd}[column sep = small]
            % https://q.uiver.app/#q=WzAsNixbMSwwLCJYIl0sWzIsMCwiWSJdLFswLDAsIlxca2VyIGYiXSxbMywwLCJjb2tlciBmIl0sWzEsMSwiY29pbWYiXSxbMiwxLCJpbWYiXSxbMiwwXSxbMCwxLCJmIl0sWzEsM10sWzAsNF0sWzEsNV0sWzQsNSwiaCJdXQ==
            {\ker f} & X & Y & {\coker f} \\
            & \coim f & \im f
            \arrow[hook, from=1-1, to=1-2]
            \arrow["f", from=1-2, to=1-3]
            \arrow[two heads, from=1-2, to=2-2]
            \arrow[two heads, from=1-3, to=1-4]
            \arrow[hook', from=2-3, to=1-3]
            \arrow["\sim", from=2-2, to=2-3]
        \end{tikzcd}\] 
        } \label{A4}
    \end{enumerate}
\end{definition}

Axiom \ref{A4} essentially states that abelian categories are those $k$-linear categories possessing all kernels and cokernels in which the first isomorphism theorem holds.

\begin{remark}
    We obtain the morphism mentioned in axiom \ref{A4} in the following way. Due to $(\im f \to Y) = \ker(Y \to \coker f)$ and the composition $X \to Y \to \coker f$ being $0$, there is a unique morphism $X \to \im f$ by the universal property of kernels. The composition $\ker f \to X \to \im f$ then equals $0$, by $\im f \hookrightarrow Y$ being a monomorphism and $\ker f \to X \to Y$ being equal to $0$. From the universal property of cokernels we then obtain a unique morphism $\coim f \to \im f$, because $(X \to \coim f) = \coker(\ker f \to X)$.
\end{remark}

\begin{example}
    The default examples of abelian categories are the category of abelian groups $\Ab$, or more generally, the category of $A$-modules $\mod{A}$ for a commutative ring $A$. The categories of coherent and quasi-coherent sheaves, $\coherent{X}$ and $\quasicoh{X}$, on a scheme $X$ are also abelian (\cite[\href{https://stacks.math.columbia.edu/tag/01BY}{Tag 01BY}]{stacks-project} and \cite[\href{https://stacks.math.columbia.edu/tag/077P}{Tag 077P}]{stacks-project}). 
       
    On the other hand the full subcategory of projective $\Z$-modules is additive, but not abelian, for its lack of cokernels. For example $\Z/n$, for $n > 1$, is not projective even though it is realized as a cokernel of a map between two projectives. Another, more geometric example also showcases the same behaviour. The category of (real or complex) vector bundles for example over the real line $\R$ is additive, but not abelian. The last claim is due to the category of vector bundles over $\R$ not being closed under kernels and cokernels.
    Through the lens of the Serre--Swan theorem \cite{swan1962}, we observe that the above examples are at least in spirit quite closely related. The theorem states
    that over a connected compact Hausdorff base space $X$ the categories of real (\resp complex) vector bundles over $X$ and the category of projective finitely generated $\mathcal{C}(X, \R)$-modules (\resp $\mathcal{C}(X, \C)$-modules) are equivalent as additive categories.

    % Through a more algebraically inclined lens, the above also makes sense because of the Serre--Swan theorem. It states  The categories of projective modules are additive, but generally not abelian. 

    % are quite closely related. 
\end{example}

\begin{definition}  
    \begin{enumerate}[label = (\roman*)] 
        \item Let
    \[
        X \xrightarrow{\ f \ } Y \xrightarrow{\ g\ } Z
    \]
    be a sequence of composable morphisms in an abelian category $\A$. We say the sequence is \emph{exact} if $g \circ f = 0$ and the induced morphism $\im f \to \ker g$ is an isomorphism.

        \item Extending (i), a sequence $\cdots \to X^0 \to X^1 \to X^2 \to \cdots$ is \emph{exact} if any subsequence $X^{i-1} \to X^i \to X^{i+1}$ for $i \in \Z$ is exact. 
        \item Exact sequences of the form $0 \to X \to Y \to Z \to 0$ are called \emph{short exact sequences}.
    \end{enumerate}
\end{definition}

To relate the definition of exactness with more primitive objects of an abelian category, namely kernels and cokernels, it is not difficult to show the following two dual statements.
\begingroup
\renewcommand{\arraystretch}{1.2}
\begin{center}
    \begin{tabular}{r c l}
        $0 \to X \to Y \to Z$ & is exact if and only if & $(X \to Y) = \ker(Y \to Z).$ \\
        $X \to Y \to Z \to 0$ & is exact if and only if & $(Y \to Z) = \coker(X \to Y).$
    \end{tabular}
\end{center}
\endgroup
% \[
%     0 \to X \to Y \to Z \quad \text{ is exact, if and only if } \quad (X \to Y) = \ker(Y \to Z),
% \]
% and dually
% \[
%     X \to Y \to Z \to 0 \quad \text{ is exact, if and only if } \quad (Y \to Z) = \coker(X \to Y).
% \]

In the context of abelian categories, functors, which preserve a bit more than just the $k$-linear structure, are of interest. This brings us to the notion of exactness of $k$-linear functors.

\begin{definition}
    Let $F \colon \A \to \B$ be a $k$-linear functor between abelian categories. 
    % Consider a short exact sequence $0 \to X \to Y \to Z \to 0$ in $\A$.
    \begin{enumerate}[label = (\roman*)]
        \item $F$ is said to be \emph{left exact} if $0 \to FX \to FY \to FZ$ is exact for any short exact sequence $0 \to X \to Y \to Z \to 0$ in $\A$.
        \item $F$ is said to be \emph{right exact} if $FX \to FY \to FZ \to 0$ is exact for any short exact sequence $0 \to X \to Y \to Z \to 0$ in $\A$.
        \item $F$ is said to be \emph{exact} if it is both left and right exact. 
    \end{enumerate}
\end{definition}

\begin{remark}
    Equivalently, one can also define left exact functors to be exactly those $k$-linear functors, which commute with kernels and dually define right exact functors to be $k$-linear functors commuting with cokernels.  
\end{remark}

\begin{example}
    \label{Homs are left exact functors}
    Let $\A$ be an abelian category and $\A^\op$ its opposite category, which is readily seen to be an abelian category as well. Then the Hom-functors 
    % For an abelian category $\A$ the Hom-functors 
    \[
    \Hom_\A(W, -) \colon \A \to \mod{k} \quad \text{ and } \quad \Hom_\A( - , W) \colon \A^\op \to \mod{k}
    \] 
    are both \emph{left} exact for any object $W$ of $\A$. Note that a sequence $0 \to X \to Y \to Z \to 0$ is exact in $\A^\op$ if $0 \to Z \to Y \to X \to 0$ is exact in $\A$.
\end{example}


% ================================================================ %



\subsection{Triangulated categories}
\label{Subsection: Triangulated categories}

In order to formulate the definition of a triangulated category more concisely, we introduce some preliminary notions. A \emph{category with translation} is a pair $(\D, T)$, where $\D$ is a category and $T$ is an auto-equivalence $T\colon \D \to \D$ called the \emph{translation functor}. If $\D$ $k$-linear, $T$ is moreover assumed to be $k$-linear. We usually denote its action on objects $X$ with $T(X) = X[1]$ and likewise its action on morphisms $f$ with $T(f) = f[1]$. A \emph{triangle} in a category with translation $(\D, T)$ is a triple of composable morphisms $(f, g, h)$ of category $\D$ taking the form 
\begin{equation}
    \label{eq: basic distinguished triangle}
    X\xrightarrow{\ f \ } Y \xrightarrow{\ g \ } Z \xrightarrow{\ h \ } X[1].
\end{equation}
A \emph{morphism} of triangles $X\xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} X[1]$ and $X'\xrightarrow{f'} Y' \xrightarrow{g'} Z' \xrightarrow{h'} X'[1]$ is given by a triple of morphisms $(u, v, w)$, for which the diagram below commutes.
\[
\begin{tikzcd}
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJYIl0sWzEsMCwiWSJdLFsyLDAsIloiXSxbMywwLCJYWzFdIl0sWzAsMSwiWCciXSxbMSwxLCJZJyJdLFsyLDEsIlonIl0sWzMsMSwiWCdbMV0iXSxbMCwxXSxbMSwyXSxbMiwzXSxbNCw1XSxbNSw2XSxbNiw3XSxbMCw0LCJcXGFscGhhIiwyXSxbMSw1LCJcXGJldGEiLDJdLFsyLDYsIlxcZ2FtbWEiLDJdLFszLDcsIlxcYWxwaGFbMV0iLDJdXQ==
	X & Y & Z & {X[1]} \\
	{X'} & {Y'} & {Z'} & {X'[1]}
	\arrow[from=1-1, to=1-2]
	\arrow["u"', from=1-1, to=2-1]
	\arrow[from=1-2, to=1-3]
	\arrow["v"', from=1-2, to=2-2]
	\arrow[from=1-3, to=1-4]
	\arrow["w"', from=1-3, to=2-3]
	\arrow["{u[1]}"', from=1-4, to=2-4]
	\arrow[from=2-1, to=2-2]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-3, to=2-4]
\end{tikzcd}
\]
One can compose morphisms of triangles in the obvious way and the notion of an isomorphism (of triangles) is defined as usual. The following definition as stated is originally due to Verdier, who first introduced it in his thesis \cite{Verdier}.

\begin{definition}
    \label{Definition of triangulated cat}
    A \emph{triangulated category} (\emph{over $k$}) is a $k$-linear category with translation $(\D, T)$ equipped with a class of \emph{distinguished triangles}, which is subject to the following four axioms.
    \begin{enumerate}[label = \textsf{TR\arabic*}]
        \item{
            \begin{enumerate}[label = (\roman*)]
            \item{Any triangle isomorphic to a distinguished triangle is also itself distinguished.} \label{TR1 i}
            \item{For any $X$ the triangle
            \[
                X \xrightarrow{\id{X}} X \longrightarrow 0 \longrightarrow X[1]
            \] 
            is distinguished.} \label{TR1 ii}
            \item{For any morphism $f \colon X \to Y$ there is a distinguished triangle of the form
            \[
                X \xrightarrow{\ f \ } Y \longrightarrow Z \longrightarrow X[1].
            \]
            } \label{TR1 iii}
            \end{enumerate}
        } \label{TR1}
        \item{The triangle
            \[
                X\xrightarrow{\ f \ } Y \xrightarrow{\ g \ } Z \xrightarrow{\ h \ } X[1]
            \]
            is distinguished if and only if
            \[
                Y \xrightarrow{\ g \ } Z \xrightarrow{\ h \ } X[1] \xrightarrow{-f[1]} Y[1]
            \]
            is distinguished.} \label{TR2}
        \item{Given two distinguished triangles and morphisms $u\colon X \to X'$ and $v\colon Y \to Y'$, depicted in the solid diagram below 
        \[
        \begin{tikzcd}[column sep = normal, row sep = 2.5em]
            % https://q.uiver.app/#q=WzAsOCxbMCwwLCJYIl0sWzEsMCwiWSJdLFsyLDAsIloiXSxbMywwLCJYWzFdIl0sWzAsMSwiWCciXSxbMSwxLCJZJyJdLFsyLDEsIlonIl0sWzMsMSwiWCdbMV0iXSxbMCwxXSxbMSwyXSxbMiwzXSxbNCw1XSxbNSw2XSxbNiw3XSxbMCw0LCJcXGFscGhhIiwyXSxbMSw1LCJcXGJldGEiLDJdLFsyLDYsIlxcZ2FtbWEiLDJdLFszLDcsIlxcYWxwaGFbMV0iLDJdXQ==
            X & Y & Z & {X[1]} \\
            {X'} & {Y'} & {Z'} & {X'[1]}
            \arrow["f", from=1-1, to=1-2]
            \arrow["u"', from=1-1, to=2-1]
            \arrow["g", from=1-2, to=1-3]
            \arrow["v"', from=1-2, to=2-2]
            \arrow["h", from=1-3, to=1-4]
            \arrow["w"', dashed, from=1-3, to=2-3]
            \arrow["{u[1]}"', from=1-4, to=2-4]
            \arrow["{f'}", from=2-1, to=2-2]
            \arrow["{g'}", from=2-2, to=2-3]
            \arrow["{h'}", from=2-3, to=2-4]
        \end{tikzcd}
        \]
        satisfying $v \circ f = f' \circ u$, there exists a (in general non-unique) morphism $w\colon Z \to Z'$, for which $(u, v, w)$ is a morphism of triangles \ie the diagram above commutes.
        } \label{TR3}
        \item{ 
            Given three distinguished triangles
            \begin{align*}
                X \xrightarrow{\ f \ } Y \xrightarrow{\ h \ } Z' \longrightarrow {X[1],} \\
                Y \xrightarrow{\ g \ } Z \xrightarrow{\ k \ } X' \longrightarrow {Y[1],} \\
                X \xrightarrow{g\circ f} Z \xrightarrow{\ \ell\ } Y' \longrightarrow {X[1],}
            \end{align*}
            there exists a distinguished triangle $Z'\xrightarrow{\ u \ } Y' \xrightarrow{\ v \ } X' \xrightarrow{\ w \ } Z'[1]$ for which the diagram below is commutative.
            \[\begin{tikzcd}[row sep = 2.5em]
                % https://q.uiver.app/#q=WzAsMTYsWzAsMCwiWCJdLFsxLDAsIlkiXSxbMiwwLCJaJyJdLFszLDAsIlhbMV0iXSxbMCwxLCJYIl0sWzEsMSwiWiJdLFsyLDEsIlknIl0sWzMsMSwiWFsxXSJdLFswLDIsIlkiXSxbMSwyLCJaIl0sWzIsMiwiWCciXSxbMywyLCJZWzFdIl0sWzAsMywiWiciXSxbMSwzLCJZJyJdLFsyLDMsIlgnIl0sWzMsMywiWidbMV0iXSxbMCw0LCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs1LDksIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEwLDE0LCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsyLDYsInUiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNiwxMCwidiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxMiwxMywidSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxMywxNCwidiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxNCwxNSwidyIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFswLDEsImYiXSxbMSwyLCJoIl0sWzIsM10sWzMsNywiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw1LCJnIFxcY2lyYyBmIl0sWzEsNSwiZyJdLFs0LDgsImYiLDJdLFs4LDEyLCJoIiwyXSxbOCw5LCJnIl0sWzksMTMsIlxcZWxsIl0sWzksMTAsImsiXSxbNSw2LCJcXGVsbCJdLFs2LDddLFsxMCwxMV0sWzcsMTEsImZbMV0iXSxbMTEsMTUsImhbMV0iXV0=
                X & Y & {Z'} & {X[1]} \\
                X & Z & {Y'} & {X[1]} \\
                Y & Z & {X'} & {Y[1]} \\
                {Z'} & {Y'} & {X'} & {Z'[1]}
                \arrow["f", from=1-1, to=1-2]
                \arrow[equals, from=1-1, to=2-1]
                \arrow["h", from=1-2, to=1-3]
                \arrow["g", from=1-2, to=2-2]
                \arrow[from=1-3, to=1-4]
                \arrow["u", dashed, from=1-3, to=2-3]
                \arrow[equals, from=1-4, to=2-4]
                \arrow["{g \circ f}", from=2-1, to=2-2]
                \arrow["f"', from=2-1, to=3-1]
                \arrow["\ell", from=2-2, to=2-3]
                \arrow[equals, from=2-2, to=3-2]
                \arrow[from=2-3, to=2-4]
                \arrow["v", dashed, from=2-3, to=3-3]
                \arrow["{f[1]}", from=2-4, to=3-4]
                \arrow["g", from=3-1, to=3-2]
                \arrow["h"', from=3-1, to=4-1]
                \arrow["k", from=3-2, to=3-3]
                \arrow["\ell", from=3-2, to=4-2]
                \arrow[from=3-3, to=3-4]
                \arrow[equals, from=3-3, to=4-3]
                \arrow["{h[1]}", from=3-4, to=4-4]
                \arrow["u", dashed, from=4-1, to=4-2]
                \arrow["v", dashed, from=4-2, to=4-3]
                \arrow["w", dashed, from=4-3, to=4-4]
            \end{tikzcd}\]
         } \label{TR4}
    \end{enumerate} 
\end{definition}

Omitting the so-called \emph{octahedral} axiom \ref{TR4} we arrive at the definition of a \emph{pre-tri\-an\-gu\-lat\-ed category}. These are essentially the categories we will be working with, since we will never use nor verify the axiom \ref{TR4}. We will nevertheless use the terminology \emph{``triangulated category''} partly to remain consistent with the existent literature and more importantly because our categories will in fact be honest triangulated categories.

\begin{remark}
    The object $Z$, called the \emph{cone of $f$}, in axiom \ref{TR1}\ref{TR1 iii} is unique up to isomorphism. This is seen through the use of axiom \ref{TR3} in combination with example \ref{partial homs are cohomological functors} and the five lemma \cite[Lemma 8.3.13]{kashiwara2006categories} from homological algebra in $\mod{k}$. 
\end{remark}

% we will nevertheless use the terminology 

% \begin{definition}
%     A \emph{triangulated category} is an additive or $k$-linear category $\D$ together with two additional pieces of structure. 
%     \begin{enumerate}    
%         \item An additive or $k$-linear auto-equivalence
%         \[
%         T\colon \D \to \D,
%         \]
%         called a \emph{translation functor}. Usually we denote its action on an object $X$ of $\D$ with $X[1]$ and its action on a morphism $f$ with $f[1]$ instead of $T(X)$ and $T(f)$.
        
%         \item A collection of \emph{distinguished triangles}, which are triplets of composable morphisms $(u, v, w)$ of category $\D$ having the form 
%         \[
%             X\xrightarrow{u} Y \xrightarrow{v} Z \xrightarrow{w} X[1],
%             \]
%     \end{enumerate}
%     The above is constrained by the following axioms.

%     \begin{enumerate}
%         \item[\text{TR1}] 
%         \item[TR2] 
%     \end{enumerate}
% \end{definition}

% \begin{remark}
%     For a distinguished triangle
%     \[
%         X\xrightarrow{\ f \ } Y \xrightarrow{\ g \ } Z \xrightarrow{\ h \ } X[1]
%     \]
%     morphisms $f$ and $g$ are said to be of degree $0$ and morphism $h$ is said to be of degree $+1$. They are also sometimes diagramatically depicted as triangles, with the markings on morphisms describing their respective degrees.
%     \[\begin{tikzcd}[column sep = small, row sep = 1.5em]
%         % https://q.uiver.app/#q=WzAsMyxbMSwwLCJaIl0sWzAsMiwiWCJdLFsyLDIsIlkiXSxbMCwxLCIrMSIsMl0sWzEsMiwiMCJdLFsyLDAsIjAiLDJdXQ==
%         & Z \\
%         \\
%         X && Y
%         \arrow["{+1}"', from=1-2, to=3-1]
%         \arrow["0", from=3-1, to=3-3]
%         \arrow["0"', from=3-3, to=1-2]
%     \end{tikzcd}\]
% \end{remark}

\begin{proposition}
    \label{composition of two arrows in d.t. is zero}
    Let $X\xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} X[1]$ be a distinguished triangle in a triangulated category $\D$. Then $g \circ f = 0$.
\end{proposition}

\begin{proof}
    First, by axiom \ref{TR2}, triangle $Y \xrightarrow{ g } Z \xrightarrow{ h } X[1] \xrightarrow{-f[1]} Y[1]$ is distinguished. By axiom \ref{TR1} \ref{TR1 ii}, triangle $Z \xrightarrow{\id{Z}} Z \to 0 \to Z[1]$ is distinguished and, by axiom \ref{TR3}, there exits a morphism from the first triangle to the second one depicted in the diagram below.
    \[\begin{tikzcd}[column sep = normal, row sep = 2.5em]
        % https://q.uiver.app/#q=WzAsOCxbMCwwLCJZIl0sWzEsMCwiWiJdLFsyLDAsIlhbMV0iXSxbMywwLCJZWzFdIl0sWzAsMSwiWiJdLFsxLDEsIloiXSxbMiwxLCIwIl0sWzMsMSwiWlsxXSJdLFswLDEsImciXSxbMSwyLCJoIl0sWzIsMywiLWZbMV0iXSxbNCw1LCJcXGlke1p9Il0sWzUsNl0sWzYsN10sWzEsNSwiXFxpZHtafSJdLFsyLDZdLFszLDcsImdbMV0iLDJdLFswLDQsImciLDJdXQ==
        Y & Z & {X[1]} & {Y[1]} \\
        Z & Z & 0 & {Z[1]}
        \arrow["g", from=1-1, to=1-2]
        \arrow["g"', from=1-1, to=2-1]
        \arrow["h", from=1-2, to=1-3]
        \arrow["{\id{Z}}", from=1-2, to=2-2]
        \arrow["{-f[1]}", from=1-3, to=1-4]
        \arrow[dashed, from=1-3, to=2-3]
        \arrow["{g[1]}"', from=1-4, to=2-4]
        \arrow["{\id{Z}}", from=2-1, to=2-2]
        \arrow[from=2-2, to=2-3]
        \arrow[from=2-3, to=2-4]
    \end{tikzcd}\]
    The rightmost square says $g[1] \circ (-f[1]) = 0$, from which we conclude that $g \circ f = 0$, after applying a quasi-inverse of the translation functor.
    % , which is an additive equivalence.
\end{proof}

\begin{definition}
    Let $\D$ and $\D'$ be triangulated categories with translation functors $T$ and $T'$ respectively. A $k$-linear functor $F \colon \D \to \D'$ is defined to be \emph{triangulated} if the following two conditions are satisfied.
    % \info{Maybe I will pick only triangulated, to not overload the term exact...}
    \begin{enumerate}[label = (\roman*)]
        \item There exists a natural isomorphism of functors 
        \[
            \eta \colon F \circ T \iso T' \circ F.
        \]
        \item For every distinguished triangle
        \[
            X\xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} X[1]
        \]
        in $\D$, the triangle
        \[
            F(X) \xrightarrow{Ff} F(Y) \xrightarrow{Fg} F(Z) \to F(X)[1] 
        \]
        is distinguished in $\D'$, where the last morphism is obtained as the composition $F(Z) \xrightarrow{Fh} F(X[1]) \xrightarrow{\eta_X} F(X)[1]$.
    \end{enumerate}
\end{definition}

% \begin{remark}
%     The condition on $F$ being an \emph{additive} functor in the above definition is actually unnecessary and follows from conditions (i) and (ii) \cite[\href{https://stacks.math.columbia.edu/tag/05QY}{Tag 05QY}]{stacks-project}.
% \end{remark}
% \info{this remark may be omitted.}

\begin{example}
    The entirety of Chapter \ref{Chapter: Derived categories} and first two sections of Chapter \ref{Chapter: Derived categories in geometry} will be devoted to constructing a substantial amount of triangulated categories and triangulated functors. The first triangulated category we will encounter in practice is $\kcat{\A}$, the homotopy category of complexes of a $k$-linear category $\A$. More on this can be found already in Section \ref{Subsection: Categories of complexes} of this chapter.
\end{example}

\begin{definition}
    Let $\D_0$ and $\D$ be triangulated categories such that $\D_0$ is a subcategory of $\D$. Then $\D_0$ is a \emph{triangulated subcategory} of $\D$ if the inclusion functor $i \colon \D_0 \hookrightarrow \D$ is a triangulated functor. 
\end{definition}

\begin{proposition}
    \label{triangulated subcategory proposition}
    Let $\D$ be a triangulated category and $\D_0 \subseteq \D$ a full $k$-linear subcategory of $\D$. Assume that the translation functor $T$ of $\D$ restricts to an autoequivalence $T_0$ of $\D_0$ and that for every distinguished triangle $X\xrightarrow{f} Y \xrightarrow{} Z \xrightarrow{} X[1]$ in $\D$, where $f$ belongs to $\D_0$, the object $Z$ is isomorphic to some object of $\D_0$. Then $\D_0$ is naturally equipped with a  triangulated structure, for which it becomes a \emph{triangulated} subcategory of $\D$.
\end{proposition}

\begin{proof}
    We take $T_0$ to be the translation functor on $\D_0$ and take distinguished triangles in $\D_0$ to be all the triangles of $\D_0$, for which there exists an isomorphism of triangles to some distinguished triangle of $\D$. Then $\D_0$ is clearly triangulated and the inclusion functor $i \colon \D_0 \hookrightarrow \D$ is triangulated.
\end{proof}

\begin{definition}
    Triangulated categories $\D$ and $\D'$ are said to be \emph{equivalent} (as triangulated categories) if there are triangulated functors $F \colon \D \to \D'$ and $G \colon \D' \to \D$, such that $G \circ F \natiso \id{\D}$ and $F \circ G \natiso \id{\D'}$ and we call $F$ and $G$ \emph{triangulated equivalences}.
\end{definition}

\begin{proposition}
    Let $F \colon \D \to \D'$ be a triangulated functor, which is an equivalence of categories with a quasi-inverse $G \colon \D' \to \D$. Then $G$ is also a triangulated  functor. 
\end{proposition}

\begin{proof}
    This is a consequence of \cite[Proposition 1.41]{huybrechts2006fouriermukai}, as equivalences of categories are special instances of adjunctions. 
\end{proof}

As a consequence, two triangulated categories are equivalent (as triangulated categories) whenever there exists a fully faithful essentially surjective triangulated functor from one to the other. 

\begin{definition}
    Let $H\colon \D \to \A$ be a $k$-linear functor from a triangulated category $\D$ to an abelian category $\A$. We say $H$ is a \emph{cohomological functor} if for every distinguished triangle $X \to Y \to Z \to X[1]$ in $\D$, the induced long sequence in $\A$
    \begin{equation}
        \label{eq: long exact sequence of cohomological functor}
        \cdots \to H(X) \to H(Y) \to H(Z) \to H(X[1]) \to H(Y[1]) \to H(Z[1]) \to \cdots
    \end{equation}
    is exact.
\end{definition}

Construction of the long sequence \eqref{eq: long exact sequence of cohomological functor} is extremely simple as opposed to other known long exact sequences assigned to certain short exact sequences (\eg of sheaves or complexes) as all the complexity is actually captured within the distinguished triangle already. All one has to do is unwrap the triangle $X \to Y \to Z \to X[1]$ into the following chain of composable morphisms
\[
    \cdots \to Y[-1] \to Z[-1] \to X \to Y \to Z \to X[1] \to Y[1] \to Z[1] \to X[2] \to \cdots
\]
and apply functor $H$ over it. 

\begin{example}
    \label{partial homs are cohomological functors}
    For any object $W$ in a triangulated category $\D$ the functors 
    \[
    \Hom_\D(W, -) \colon \D \to \mod{k} \text{ and } \Hom_\D( - , W) \colon \D^\op \to \mod{k}
    \]
    are cohomological\footnote{With claiming that $\Hom_\D(-, W)$ is cohomological we are being slightly imprecise, as we have not clarified what the triangulated structure on $\D^\op$ is. We take it to be the most obvious one (\cf \cite[\S 1.1.2]{milicic-dercat}).}. Let us verify the first claim. Consider the long sequence 
    \[
        \cdots \to \Hom_\D(W, X) \to \Hom_\D(W, Y) \to \Hom_\D(W, Z) \to \Hom_\D(W, X[1]) \to \cdots 
    \]
    arising from a distinguished triangle $X\xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} X[1]$. Since the translation functor on $\D$ and the axiom \ref{TR2} allow us to turn this triangle and still end up with a distinguished triangle, it suffices to verify only that 
    \[
    \Hom_\D(W, X) \xrightarrow{f_*} \Hom_\D(W, Y) \xrightarrow{g_*} \Hom_\D(W, Z) \quad \text{ is exact.}
    \]
    By Proposition \ref{composition of two arrows in d.t. is zero} we see that $\im f_* \subseteq \ker g_* $, so we are left to prove the other inclusion. Suppose $v \colon W \to Y$ is in $\ker g_*$. Then axiom \ref{TR3} (together with \ref{TR2} and \ref{TR1}\ref{TR1 ii})
    % \info{As this is the first argument with the axioms of triangulated cats, I could maybe expand it a little bit more. }
    asserts the existence of a morphism $u \colon W \to X$ making the diagram below commutative.
    \[
        \begin{tikzcd}[column sep = normal, row sep = 2.5em]
            % https://q.uiver.app/#q=WzAsOCxbMCwwLCJYIl0sWzEsMCwiWSJdLFsyLDAsIloiXSxbMywwLCJYWzFdIl0sWzAsMSwiWCciXSxbMSwxLCJZJyJdLFsyLDEsIlonIl0sWzMsMSwiWCdbMV0iXSxbMCwxXSxbMSwyXSxbMiwzXSxbNCw1XSxbNSw2XSxbNiw3XSxbMCw0LCJcXGFscGhhIiwyXSxbMSw1LCJcXGJldGEiLDJdLFsyLDYsIlxcZ2FtbWEiLDJdLFszLDcsIlxcYWxwaGFbMV0iLDJdXQ==
            W & W & 0 & {W[1]} \\
            {X} & {Y} & {Z} & {X[1]}
            \arrow["\id{W}", from=1-1, to=1-2]
            \arrow["u"', dashed, from=1-1, to=2-1]
            \arrow["", from=1-2, to=1-3]
            \arrow["v"', from=1-2, to=2-2]
            \arrow["", from=1-3, to=1-4]
            \arrow["w"', from=1-3, to=2-3]
            \arrow["{u[1]}"', from=1-4, to=2-4]
            \arrow["{f}", from=2-1, to=2-2]
            \arrow["{g}", from=2-2, to=2-3]
            \arrow["{h}", from=2-3, to=2-4]
        \end{tikzcd}
        \]
    From the commutative square on the left it is then clear that $v \in \im f_*$, as $v = f \circ u$.
\end{example}

\begin{lemma}
    \label{f iso iff cone trivial}
    Let $X \xrightarrow{f} Y \to Z \to X[1]$ be a distinguished triangle in a triangulated category $\D$. Then $f$ is an isomorphism if and only if $Z \iso 0$.
\end{lemma}

\begin{proof}
    We argue with a chain of equivalences. Observe that $f$ is an isomorphism if and only if $f_*\colon \Hom_\D(W, X) \to \Hom_\D(W, Y)$ and $f^* \colon \Hom_\D(Y, W) \to \Hom_\D(X, W)$ are isomorphisms for all objects $W$ of $\D$. From the existence of long exact sequences established in the previous example the latter condition is equivalent to $\Hom_\D(W, Z) = 0$ and $\Hom_\D(Z, W) = 0$ for all $W$, which in turn is equivalent to $Z \iso 0$.
    % \info{I think Yoneda can be used here to enable us to consider only $f_*$ instead of both $f_*$ and $f^*$. \ie $f_*$ iso for all $W$ iff $f$ iso}
\end{proof}

\begin{lemma}
    \label{direct sum of d.t. is d.t.}
    \emph{\cite[\S 10, Proposition 10.1.18]{kashiwara2006categories}}
    Let triangles $X\xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} X[1]$ and $X'\xrightarrow{f'} Y' \xrightarrow{g'} Z' \xrightarrow{h'} X'[1]$ be distinguished in a triangulated category $\D$. Then their direct sum
    \[
        X \oplus X' \xrightarrow{f \oplus f'} Y \oplus Y' \xrightarrow{g \oplus g'} Z \oplus Z' \xrightarrow{h \oplus h'} (X \oplus X')[1]
    \]
    is also distinguished in $\D$.
\end{lemma}

\begin{proof}
    By \ref{TR1}\ref{TR1 iii} we may extend $f_0 \oplus f_1$ to a distinguished triangle
    \begin{equation}
        \label{eq: triangle on f + f'}
        X \oplus X' \xrightarrow{f \oplus f'} Y \oplus Y' \xrightarrow{} Q \xrightarrow{} (X \oplus X')[1].
    \end{equation}
    Axiom \ref{TR3} applied to the canonical projections
    \[
        X \xleftarrow{p} X \oplus X' \xrightarrow{p'} X' \quad \text{and} \quad 
        Y \xleftarrow{q} Y \oplus Y' \xrightarrow{q'} Y'
    \]
    then induces morphisms $r \colon Q \to Z$ and $r' \colon Q \to Z'$, such that $(p,q,r)$ is a morphism from the triangle \eqref{eq: triangle on f + f'} to $(f,g,h)$ and similarly $(p', q', r')$ is a morphism from triangle \eqref{eq: triangle on f + f'} to $(f', g', h')$. By the universal property of products $(r, r') \colon Q \to Z \oplus Z'$ is induced. We thus obtain a morphism of triangles, where the top triangle is distinguished, while the bottom one we are aiming to show is distinguished as well.
    \begin{equation}
        \label{eq: diagram for sum of two triangles}
        \begin{tikzcd}[column sep = normal, row sep = 2.5em]
            % https://q.uiver.app/#q=WzAsOCxbMCwwLCJYIl0sWzEsMCwiWSJdLFsyLDAsIloiXSxbMywwLCJYWzFdIl0sWzAsMSwiWCciXSxbMSwxLCJZJyJdLFsyLDEsIlonIl0sWzMsMSwiWCdbMV0iXSxbMCwxXSxbMSwyXSxbMiwzXSxbNCw1XSxbNSw2XSxbNiw3XSxbMCw0LCJcXGFscGhhIiwyXSxbMSw1LCJcXGJldGEiLDJdLFsyLDYsIlxcZ2FtbWEiLDJdLFszLDcsIlxcYWxwaGFbMV0iLDJdXQ==
            X \oplus X' & Y \oplus Y' & Q & {(X \oplus X')[1]} \\
            X \oplus X' & Y \oplus Y' & Z \oplus Z' & {(X \oplus X')[1]}
            \arrow["f \oplus f'", from=1-1, to=1-2]
            \arrow[""', equals, from=1-1, to=2-1]
            \arrow["", from=1-2, to=1-3]
            \arrow[""', equals, from=1-2, to=2-2]
            \arrow["", from=1-3, to=1-4]
            \arrow["{(r,r')}"', from=1-3, to=2-3]
            \arrow[""', equals, from=1-4, to=2-4]
            \arrow["f \oplus f'", from=2-1, to=2-2]
            \arrow["g \oplus g'", from=2-2, to=2-3]
            \arrow["h \oplus h'", from=2-3, to=2-4]
        \end{tikzcd}
    \end{equation}
    Consider now the cohomological functor $H = \Hom_\D(W, -) \colon \D \to \mod{k}$ for an object $W$ of $\D$. Applying the functor $\Hom_\D(W, -)$ to the diagram \eqref{eq: diagram for sum of two triangles} yields the following commutative diagram in $\mod{k}$.
    \[\begin{tikzcd}[column sep = 1.5em]
        % https://q.uiver.app/#q=WzAsMTAsWzAsMCwiSChYIFxcb3BsdXMgWCcpIl0sWzEsMCwiSChZIFxcb3BsdXMgWScpIl0sWzIsMCwiSChRKSJdLFszLDAsIkgoKFhcXG9wbHVzIFgnKVsxXSkiXSxbNCwwLCJIKChZXFxvcGx1cyBZJylbMV0pIl0sWzAsMSwiSChYIFxcb3BsdXMgWCcpIl0sWzEsMSwiSChZIFxcb3BsdXMgWScpIl0sWzIsMSwiSChaIFxcb3BsdXMgWicpIl0sWzMsMSwiSCgoWFxcb3BsdXMgWCcpWzFdKSJdLFs0LDEsIkgoKFlcXG9wbHVzIFknKVsxXSkiXSxbMCw1LCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs0LDksIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsOCwiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMiw3LCIocixyJylfKiJdLFsxLDYsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMV0sWzEsMl0sWzIsM10sWzMsNF0sWzgsOV0sWzcsOF0sWzYsN10sWzUsNl1d
        {H(X \oplus X')} & {H(Y \oplus Y')} & {H(Q)} & {H((X\oplus X')[1])} & {H((Y\oplus Y')[1])} \\
        {H(X \oplus X')} & {H(Y \oplus Y')} & {H(Z \oplus Z')} & {H((X\oplus X')[1])} & {H((Y\oplus Y')[1])}
        \arrow[from=1-1, to=1-2]
        \arrow[equals, from=1-1, to=2-1]
        \arrow[from=1-2, to=1-3]
        \arrow[equals, from=1-2, to=2-2]
        \arrow[from=1-3, to=1-4]
        \arrow["{(r,r')_*}", from=1-3, to=2-3]
        \arrow[from=1-4, to=1-5]
        \arrow[equals, from=1-4, to=2-4]
        \arrow[equals, from=1-5, to=2-5]
        \arrow[from=2-1, to=2-2]
        \arrow[from=2-2, to=2-3]
        \arrow[from=2-3, to=2-4]
        \arrow[from=2-4, to=2-5]
    \end{tikzcd}\]
    By the universal property of products, we have isomorphisms of modules 
    \[
        \Hom_\D(W, X \oplus X') \iso \Hom_\D(W, X) \oplus \Hom_\D(W, X'),
    \]
    natural in $X$ and $X'$. Thus the bottom row of the above diagram may be viewed as a direct sum of two sequences, which come about through the application of the functor $\Hom_\D(W, -)$ to a pair of distinguished triangles $(f,g,h)$ and $(f',g',h')$. Since $\Hom_\D(W, -)$ is cohomological and a sum of exact sequences is exact the bottom row is an exact sequence. The top row is exact as well because \eqref{eq: triangle on f + f'} is distinguished. Since all but the middle vertical arrow $(r,r')_*$ are isomorphisms, the \emph{five lemma}\footcite[\S 8, Lemma 8.3.13]{kashiwara2006categories} implies that $(r,r')_*$ is an isomorphism as well. As this holds for any object $W$ of $\D$, the morphism $(r,r')$ is an isomorphism by Yoneda lemma, more precisely \cite[\S 1, Corollary 1.4.7]{kashiwara2006categories}. This means that the bottom row of \eqref{eq: diagram for sum of two triangles} is distinguished by axiom \ref{TR1}\ref{TR1 i}, which is what we wanted to show. \qedhere
    % \[\begin{tikzcd}[column sep = 0.5em]
    %     % https://q.uiver.app/#q=WzAsMTUsWzAsMCwiSChYIFxcb3BsdXMgWCcpIl0sWzEsMCwiSChZIFxcb3BsdXMgWScpIl0sWzIsMCwiSChRKSJdLFszLDAsIkgoKFhcXG9wbHVzIFgnKVsxXSkiXSxbNCwwLCJIKChZXFxvcGx1cyBZJylbMV0pIl0sWzAsMSwiSChYIFxcb3BsdXMgWCcpIl0sWzEsMSwiSChZIFxcb3BsdXMgWScpIl0sWzIsMSwiSChaIFxcb3BsdXMgWicpIl0sWzMsMSwiSCgoWFxcb3BsdXMgWCcpWzFdKSJdLFs0LDEsIkgoKFlcXG9wbHVzIFknKVsxXSkiXSxbMCwyLCJIKFgpIFxcb3BsdXMgSChYJykiXSxbMSwyLCJIKFkpIFxcb3BsdXMgSChZJykiXSxbMiwyLCJIKFopIFxcb3BsdXMgSChaJykiXSxbMywyLCJIKFhbMV0pXFxvcGx1cyBIKFgnWzFdKSJdLFs0LDIsIkgoWVsxXSlcXG9wbHVzIEgoWSdbMV0pIl0sWzAsNSwiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNSwxMCwiXFxzaW0iXSxbNiwxMSwiXFxzaW0iXSxbNywxMiwiXFxzaW0iXSxbOCwxMywiXFxzaW0iXSxbOSwxNCwiXFxzaW0iXSxbNCw5LCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDgsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzIsNywiKHIscicpXyoiXSxbMSw2LCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDFdLFsxLDJdLFsyLDNdLFszLDRdLFs4LDldLFsxMywxNF0sWzcsOF0sWzEyLDEzXSxbNiw3XSxbMTEsMTJdLFs1LDZdLFsxMCwxMV1d
    %     {H(X \oplus X')} & {H(Y \oplus Y')} & {H(Q)} & {H((X\oplus X')[1])} & {H((Y\oplus Y')[1])} \\
    %     {H(X \oplus X')} & {H(Y \oplus Y')} & {H(Z \oplus Z')} & {H((X\oplus X')[1])} & {H((Y\oplus Y')[1])} \\
    %     {H(X) \oplus H(X')} & {H(Y) \oplus H(Y')} & {H(Z) \oplus H(Z')} & {H(X[1])\oplus H(X'[1])} & {H(Y[1])\oplus H(Y'[1])}
    %     \arrow[from=1-1, to=1-2]
    %     \arrow[equals, from=1-1, to=2-1]
    %     \arrow[from=1-2, to=1-3]
    %     \arrow[equals, from=1-2, to=2-2]
    %     \arrow[from=1-3, to=1-4]
    %     \arrow["{(r,r')_*}", from=1-3, to=2-3]
    %     \arrow[from=1-4, to=1-5]
    %     \arrow[equals, from=1-4, to=2-4]
    %     \arrow[equals, from=1-5, to=2-5]
    %     \arrow[from=2-1, to=2-2]
    %     \arrow["\sim", from=2-1, to=3-1]
    %     \arrow[from=2-2, to=2-3]
    %     \arrow["\sim", from=2-2, to=3-2]
    %     \arrow[from=2-3, to=2-4]
    %     \arrow["\sim", from=2-3, to=3-3]
    %     \arrow[from=2-4, to=2-5]
    %     \arrow["\sim", from=2-4, to=3-4]
    %     \arrow["\sim", from=2-5, to=3-5]
    %     \arrow[from=3-1, to=3-2]
    %     \arrow[from=3-2, to=3-3]
    %     \arrow[from=3-3, to=3-4]
    %     \arrow[from=3-4, to=3-5]
    % \end{tikzcd}\]

    % %  which fit into diagrams
    % \begin{center}
    %     \begin{tabular}{l c r}
    %         \begin{tikzcd}[column sep = 1.5em, row sep = 2.5em]
    %             % https://q.uiver.app/#q=WzAsOCxbMCwwLCJYIl0sWzAsMSwiWSJdLFswLDIsIloiXSxbMCwzLCJYWzFdIl0sWzEsMCwiWCciXSxbMSwxLCJZJyJdLFsxLDIsIlonIl0sWzEsMywiWCdbMV0iXSxbMCwxXSxbMSwyXSxbMiwzXSxbNCw1XSxbNSw2XSxbNiw3XSxbMCw0LCJcXGFscGhhIiwyXSxbMSw1LCJcXGJldGEiLDJdLFsyLDYsIlxcZ2FtbWEiLDJdLFszLDcsIlxcYWxwaGFbMV0iLDJdXQ==
    %             X \oplus X' & {X} \\
    %             Y \oplus Y' & {Y} \\
    %             W & {Z} \\
    %             {(X \oplus X')[1]} & {X[1]}
    %             \arrow["p", from=1-1, to=1-2]
    %             \arrow["f \oplus f'"', from=1-1, to=2-1]
    %             \arrow["f", from=1-2, to=2-2]
    %             \arrow["q", from=2-1, to=2-2]
    %             \arrow[from=2-1, to=3-1]
    %             \arrow[from=2-2, to=3-2]
    %             \arrow["r", dashed, from=3-1, to=3-2]
    %             \arrow[from=3-1, to=4-1]
    %             \arrow[from=3-2, to=4-2]
    %             \arrow["{}", from=4-1, to=4-2]
    %         \end{tikzcd}
    %         & \quad \text{and} \quad &
    %         \begin{tikzcd}[column sep = 1.5em, row sep = 2.5em]
    %             % https://q.uiver.app/#q=WzAsOCxbMCwwLCJYIl0sWzAsMSwiWSJdLFswLDIsIloiXSxbMCwzLCJYWzFdIl0sWzEsMCwiWCciXSxbMSwxLCJZJyJdLFsxLDIsIlonIl0sWzEsMywiWCdbMV0iXSxbMCwxXSxbMSwyXSxbMiwzXSxbNCw1XSxbNSw2XSxbNiw3XSxbMCw0LCJcXGFscGhhIiwyXSxbMSw1LCJcXGJldGEiLDJdLFsyLDYsIlxcZ2FtbWEiLDJdLFszLDcsIlxcYWxwaGFbMV0iLDJdXQ==
    %             X \oplus X' & {X'} \\
    %             Y \oplus Y' & {Y'} \\
    %             W & {Z'} \\
    %             {(X \oplus X')[1]} & {X'[1].}
    %             \arrow["p'", from=1-1, to=1-2]
    %             \arrow["f \oplus f'"', from=1-1, to=2-1]
    %             \arrow["f'", from=1-2, to=2-2]
    %             \arrow["q'", from=2-1, to=2-2]
    %             \arrow[from=2-1, to=3-1]
    %             \arrow[from=2-2, to=3-2]
    %             \arrow["r'", dashed, from=3-1, to=3-2]
    %             \arrow[from=3-1, to=4-1]
    %             \arrow[from=3-2, to=4-2]
    %             \arrow["{}", from=4-1, to=4-2]
    %         \end{tikzcd}
    %     \end{tabular}
    % \end{center}


    % $p_i \colon X_0 \oplus X_1 \to X_i$ and $q_i \colon Y_0 \oplus Y_1 \to Y_i$ 
\end{proof}

\begin{lemma}
    \label{split distinguished triangles}
    \emph{\cite[\S 10, Corollary 10.1.20]{kashiwara2006categories}}
    Let $X\xrightarrow{f} Y \xrightarrow{g} Z \xrightarrow{h} X[1]$ be a distinguished triangle in a triangulated category $\D$ and assume $h = 0$. Then there exists an isomorphism $Y \iso X \oplus Z$, for which the next diagram commutes.
    \begin{equation}
        \label{eq: split d.t.}
        \begin{tikzcd}[column sep = normal, row sep = 2.5em]
            % https://q.uiver.app/#q=WzAsOCxbMCwwLCJYIl0sWzEsMCwiWSJdLFsyLDAsIloiXSxbMywwLCJYWzFdIl0sWzAsMSwiWCciXSxbMSwxLCJZJyJdLFsyLDEsIlonIl0sWzMsMSwiWCdbMV0iXSxbMCwxXSxbMSwyXSxbMiwzXSxbNCw1XSxbNSw2XSxbNiw3XSxbMCw0LCJcXGFscGhhIiwyXSxbMSw1LCJcXGJldGEiLDJdLFsyLDYsIlxcZ2FtbWEiLDJdLFszLDcsIlxcYWxwaGFbMV0iLDJdXQ==
            X & X \oplus Z & Z & {X[1]} \\
            {X} & {Y} & {Z} & {X'[1]}
            \arrow["", from=1-1, to=1-2]
            \arrow[""', equals, from=1-1, to=2-1]
            \arrow["", from=1-2, to=1-3]
            \arrow["\sim"', from=1-2, to=2-2]
            \arrow["0", from=1-3, to=1-4]
            \arrow[""', equals, from=1-3, to=2-3]
            \arrow[""', equals, from=1-4, to=2-4]
            \arrow["f", from=2-1, to=2-2]
            \arrow["g", from=2-2, to=2-3]
            \arrow["0", from=2-3, to=2-4]
        \end{tikzcd}
    \end{equation}
    % Let $\D$ be a triangulated category and assume morphism $h$ in \eqref{eq: basic distinguished triangle} is $0$. 
\end{lemma}

\begin{proof}
    First, the triangle $X \xrightarrow{i_X} X \oplus Z \xrightarrow{p_Z} Z \xrightarrow{0} X[1]$ is distinguished by Lemma \ref{direct sum of d.t. is d.t.}, because it is easily seen to be isomorphic to the direct sum of distinguished triangles $X \to X \to 0 \to X[1]$ and $0 \to Z \to Z \to 0[1]$. By axiom \ref{TR3}, there exists a morphism $X \oplus Z \to Y$ for which diagram \eqref{eq: split d.t.} commutes. A similar use of the cohomological functor $\Hom_\D(W, -)\colon \D \to \mod{k}$ as in the proof of Lemma \ref{direct sum of d.t. is d.t.}, arguing with the five lemma and Yoneda lemma, shows that $X \oplus Z \to Y$ is in fact an isomorphism.
    % As per the assumption $h = 0$, the long exact sequence 
    % \[
    %     \cdots \to \Hom_\D(Z, X) \xrightarrow{f_*} \Hom_\D(Z, Y) \xrightarrow{g_*} \Hom_\D(Z, Z) \xrightarrow{0} \Hom_\D(X[1], Z) \to \cdots
    % \]   
    % implies that $g_*$ is surjective. This means that there exists a morphism $s \colon Z \to Y$, such that $g\circ s = \id{Z}$. The newly obtained morphism $s$ now alloThen $\langle f, s \rangle i_X = f$
\end{proof}

The following are all specialized results characterizing, when a triangulated functor is an equivalence. 
% We will use \ref{} in the proof of proposition \ref{}. 
They will be used in a fundamental way in the proof of the derived Torelli theorem. In particular we highlight 
% Proposition \ref{Fully faithful functor on a spanning class},  and
Corollary \ref{condition for functor to be an equivalence} and Proposition \ref{Serre functors and adjoints}, which will be directly used in the proof. We mention that all the results of this part can be found in \cite[\S 1]{huybrechts2006fouriermukai}.
% We will exploit corollary \ref{condition for functor to be an equivalence} and proposition \ref{Serre functors and adjoints} in the proof of the Derived Torelli theorem in section \ref{}.

\begin{definition}
    Let $\D$ be a triangulated category. A collection of objects $\Omega$ in $\D$ forms a \emph{spanning class} of $\D$, if for all objects $X$ of $\D$, the following two conditions are satisfied. 
    \begin{enumerate}[label = (\roman*)]
        \item{If $\Hom_\D(U, X[i]) = 0$ for all $U \in \Omega$ and all $i \in \Z$, then $X \iso 0$.}
        \item{If $\Hom_\D(X, U[i]) = 0$ for all $U \in \Omega$ and all $i \in \Z$, then $X \iso 0$.} 
    \end{enumerate}
\end{definition}

\begin{proposition}
    \label{Fully faithful functor on a spanning class}
    \emph{\cite[\S 1, Proposition 1.49]{huybrechts2006fouriermukai}}
    Let $F \colon \D \to \D'$ be a triangulated functor of triangulated categories. Assume $F$ has left and right adjoints $G \dashv F \dashv H$. Suppose $\D$ contains a spanning class $\Omega$ and that $F$ induces isomorphisms
    \begin{equation}
        \label{eq: action of F on spanning class}
        \Hom_\D(U, V[i]) \to \Hom_{\D'}(F(U), F(V[i]))
    \end{equation}
    for all $U ,V \in \Omega$. Then $F$ is fully faithful.
\end{proposition}

\begin{proof}
    For any $X, Y$ of $\D$ we will show that the morphism action of $F$
    \[
        \Hom_\D(X, Y[i]) \to \Hom_{\D'}(F(X), F(Y[i]))
    \]
    is an isomorphism. The two adjunctions $G \dashv F \dashv H$ give rise to the following commutative diagram
    \begin{equation}
        \label{eq: two adjunctions diagram}
    \begin{tikzcd}[column sep = small, row sep = 2em]
        % https://q.uiver.app/#q=WzAsNCxbMiwyLCJcXEhvbV97XFxEJ30oRihYKSwgRihZKSkiXSxbMiwwLCJcXEhvbV97XFxEfShYLCBIRihZKSkiXSxbMCwwLCJcXEhvbV9cXEQoWCxZKSJdLFswLDIsIlxcSG9tX1xcRChHRihYKSwgWSkiXSxbMiwzLCIoXFx2YXJlcHNpbG9uX1gpXioiXSxbMiwxLCIoXFxldGFfWSlfKiJdLFsxLDAsIlxcc2ltIl0sWzMsMCwiXFxzaW0iXSxbMiwwLCJGIl1d
        {\Hom_\D(X,Y)} && {\Hom_{\D}(X, HF(Y))} \\
        \\
        {\Hom_\D(GF(X), Y)} && {\Hom_{\D'}(F(X), F(Y)),}
        \arrow["{(\eta_Y)_*}", from=1-1, to=1-3]
        \arrow["{(\varepsilon_X)^*}"', from=1-1, to=3-1]
        \arrow["F", from=1-1, to=3-3]
        \arrow["\sim", from=1-3, to=3-3]
        \arrow["\sim", from=3-1, to=3-3]
    \end{tikzcd}
    \end{equation}
    where $\eta_Y\colon Y \to HF(Y)$ denotes the unit of the adjunction $F \dashv H$ and $\varepsilon_X \colon GF(X) \to X$ denotes the counit of the adjunction $G \dashv F$.

    First we show that $\varepsilon_U$ is an isomorphism for every $U \in \Omega$. Indeed, as $\varepsilon_U$ fits into a distinguished triangle
    \[
        GF(U) \xrightarrow{\ \varepsilon_U \ } U \longrightarrow Z \longrightarrow (GF(U))[1],
    \]
    the cohomological functor $\Hom_\D(-, V)$, for $V \in \Omega$, induces a long exact sequence 
    \begin{multline}
        \label{eq: LES for counit}
        \cdots \leftarrow \Hom_\D(GF(U), V) \xleftarrow{(\varepsilon_U)^*} \Hom_\D(U, V) \leftarrow \\
        \leftarrow \Hom_\D(Z, V) \leftarrow \Hom_\D(GF(U)[1], V) \leftarrow \cdots.
    \end{multline}
    By assumption \eqref{eq: action of F on spanning class} is a bijection for all $U, V \in \Omega$ and $i \in \Z$, thus, considering the diagram \eqref{eq: two adjunctions diagram}, where we set $X = U$ and $Y = V$, we see that $(\varepsilon_U)^*$, along with $(\varepsilon_U[i])^*$ for all $i \in \Z$, is an isomorphism. From the long exact sequence \eqref{eq: LES for counit} we then conclude that $\Hom_\D(Z[i], V) = 0$ for all $i \in \Z$ and as $V \in \Omega$ belonging to a spanning class of $\D$ was arbitrary, $Z \iso 0$, showing $\varepsilon_U$ is an isomorphism by Lemma \ref{f iso iff cone trivial}.

    Secondly, we show that $\eta_Y$ is an isomorphism for all objects $Y$ of $\D$. This is done in a very similar manner. Considering now the distinguished triangle
    \[
        Y \xrightarrow{\ \eta_Y \ } HF(Y) \longrightarrow Z \longrightarrow Y[1],
    \]
    we apply the cohomological functor $\Hom_\D(U, -)$, for $U \in \Omega$, to obtain the long exact sequence
    \begin{multline}
        \label{eq: LES for unit}
        \cdots \to \Hom_\D(U, Y) \xrightarrow{(\eta_Y)_*} \Hom_\D(U, HF(Y)) \to \\
        \to \Hom_\D(U, Z) \to \Hom_\D(U, Y[1]) \to \cdots.
    \end{multline}
    Setting $X = U$ in diagram \eqref{eq: two adjunctions diagram}, we see that $\varepsilon_U$ being an isomorphism implies $(\eta_Y)_*$ is an isomorphism. The long exact sequence \eqref{eq: LES for unit} then establishes $\Hom_\D(U, Z[i]) = 0$ for all $i \in \Z$, thus showing $Z \iso 0$. Consequently $\eta_Y$ is an isomorphism by Lemma \ref{f iso iff cone trivial}.
    
    Lastly, looking back at diagram \eqref{eq: two adjunctions diagram}, $\eta_Y$ being an isomorphism, for all objects $Y$ of $\D$, proves, that the morphism action of $F$ is an isomorphism \ie $F$ is fully faithful.
\end{proof}

\begin{definition}
    \label{Definition of decomposable category}
    Let $\D$ be a triangulated category and $\D_0$, $\D_1$ its triangulated subcategories. We say $\D$ \emph{decomposes} into $\D_0$ and $\D_1$ if the following three conditions are met.
    \begin{enumerate}[label = (\roman*)]
        \item Categories $\D_0$ and $\D_1$ contain objects not isomorphic to $0$.
        \item Every object $X$ of $\D$ fits into a distinguished triangle (in $\D$) of the form
        \[
            Y_0 \to X \to Y_1 \to Y_0[1],
        \]
        where $Y_0$ and $Y_1$ belong to $\D_0$ and $\D_1$ respectively.
        \item For all objects $Y_0$ of $\D_0$ and $Y_1$ of $\D_1$ it holds that
        \[
            \Hom_\D(Y_0, Y_1) = 0 \quad \text{ and } \quad \Hom_\D(Y_1, Y_0) = 0.
        \]
        In this case we also say that $\D_0$ and $\D_1$ are \emph{orthogonal}.
    \end{enumerate} 
    Additionally, $\D$ is called \emph{indecomposable}, if it cannot be decomposed in this way.
\end{definition}

\begin{proposition}
    \label{In a decomposable cat every object splits}
    Suppose a triangulated category $\D$ decomposes into $\D_0$ and $\D_1$. Then every object $X$ of $\D$ is isomorphic to $Y_0 \oplus Y_1$ for some objects $Y_0$ and $Y_1$ belonging to $\D_0$ and $\D_1$, respectively.
\end{proposition}

\begin{proof}
    This is a direct consequence of the definition and Lemma \ref{split distinguished triangles}.
\end{proof}

\begin{lemma}
    \emph{\cite[\S 1, Lemma 1.50]{huybrechts2006fouriermukai}}
    Let $F \colon \D \to \D'$ be a fully faithful triangulated functor between triangulated categories $\D$ and $\D'$. Suppose $F$ has a right adjoint $F \dashv H \colon \D' \to \D$. Then $F$ is an equivalence if and only if for any object $Z$ in $\D'$ the condition $H(Z) \iso 0$ implies $Z \iso 0$.
\end{lemma}

\begin{proof}
    \noindent
    ($\Rightarrow$) Let $Y$ belong to $\D'$. Since $F$ is part of an equivalence, the counit $\varepsilon_Y \colon FH(Y) \to Y$ is an isomorphism, thus, as $H(Y) \iso 0$ implies $FH(Y) \iso 0$, we see that $Y \iso 0$.

    \noindent
    ($\Leftarrow$) Recall that whenever $F$ is part of an adjunction $F \dashv H$, it is fully faithful if and only if the unit $\eta\colon \id{\D} \Longrightarrow HF$ is an isomorphism (this is easily seen from diagram \eqref{eq: two adjunctions diagram} or \cite[\href{https://stacks.math.columbia.edu/tag/07RB}{Tag 07RB}]{stacks-project}). Thus it suffices to show that the counit $\varepsilon \colon FH \Longrightarrow \id{\D'}$ is an isomorphism. Pick an object $Y$ of $\D'$ and extend $\varepsilon_Y \colon FH(Y) \to Y$ to a distinguished triangle $FH(Y) \to Y \to Z \to FH(Y)[1]$ in $\D'$. After applying the triangulated functor $H$ (\cf \cite[\S 1, Proposition 1.41]{huybrechts2006fouriermukai}) to the latter triangle, we obtain
    \[
        HFH(Y) \xrightarrow{ H(\varepsilon_Y) } H(Y) \longrightarrow H(Z) \longrightarrow HFH(Y)[1].
    \]
    By the triangle identity relating units and counits of an adjunction \cite[\href{https://stacks.math.columbia.edu/tag/0GLL}{Tag 0GLL}]{stacks-project}, we have
    \begin{equation}
        \label{eq: triangle identity for adjunctions}
        H(\varepsilon_Y) \circ \eta_{H(Y)}  = \id{H(Y)},
    \end{equation}
    and as observed earlier, since $\eta_{H(Y)}$ is an isomorphism, $H(\varepsilon_Y)$ is as well. It follows by \ref{f iso iff cone trivial} that $H(Z) \iso 0$, from which, by the assumption, $Z \iso 0$ follows. Finally, by \ref{f iso iff cone trivial} again, $\varepsilon_Y$ is an isomorphism, proving our claim.
\end{proof}

\begin{proposition}
    \label{condition for functor to be an equivalence}
    \emph{\cite[\S 1, Proposition 1.54]{huybrechts2006fouriermukai}}
    Let $F \colon \D \to \D'$ be a fully faithful triangulated functor between triangulated categories $\D$ and $\D'$ having both left and right adjoints $G \dashv F \dashv H$. Further assume $\D$ has objects not isomorphic to $0$ and that $\D'$ is indecomposable. Then $F$ is an equivalence if and only if for all objects $Y$ in $\D'$ the condition $H(Y) \iso 0$ implies $G(Y) \iso 0$. 
\end{proposition}

\begin{proof}
    If $F$ is an equivalence, the condition is satisfied because its quasi-inverse is both a left and right adjoint to $F$ and adjoints are unique up to natural isomorphisms. Suppose now that the condition is satisfied and we show that $F$ is essentially surjective. 
    
    We will first construct two triangulated subcategories of $\D'$, where one of which will turn out to contain only trivial objects by indecomposability of $\D'$. Let $\D_0'$ be the full subcategory of $\D'$ consisting of all objects $Y$, for which $H(Y) \iso 0$. As $H$ is triangulated $\D_0'$ is a full \emph{triangulated} subcategory of $\D'$. We will show this category contains only trivial objects.
    Let $\D'_1$ be the full subcategory of $\D'$ consisting of objects isomorphic to $F(X)$ for some object $X$ of $\D$. Similarly, as $F$ is triangulated, $\D'_1$ is a triangulated subcategory of $\D'$, sometimes called the \emph{essential image of $F$}. We now show that $\D_0'$ and $\D_1'$ satisfy conditions (ii) and (iii) of Definition \ref{Definition of decomposable category}.

    To verify (ii) pick any object $Y$ of $\D'$ and consider the counit $\varepsilon_Y$ within a distinguished triangle
    \begin{equation}
        \label{eq: distinguished triangle of counit}
        FH(Y) \xrightarrow{ \varepsilon_Y } Y \to Z \to FH(Y)[1]
    \end{equation}
    of $\D'$. By definition $FH(Y)$ belongs to $\D'_1$. On the other hand, to see that $Z$ belongs to $\D'_0$, we map the triangle to $\D$ via the functor $H$, to conclude that $H(\varepsilon_Y)$ is an isomorphism, by the triangle identity \eqref{eq: triangle identity for adjunctions} and the fact that $F$ is fully faithful (thus $\eta_{H(Y)}$ is an isomorphism). Then $H(Z) \iso 0$ by Lemma \ref{f iso iff cone trivial}, showing that $Z$ belongs to $\D_0'$.

    To see why (iii) holds true pick objects $Y_0$ and $Y_1$ of $\D'_0$ and $\D'_1$ respectively. Then by definition there exists an object $X$ of $\D$, such that $F(X) \iso Y_1$, so we compute
    \[
        \Hom_{\D'}(Y_1, Y_0) \iso \Hom_{\D'}(F(X), Y_0) \iso \Hom_{\D}(X, H(Y_0)) = 0
    \]
    because $H(Y_0) \iso 0$. As per the assumption, $H(Y_0) \iso 0$ implies $G(Y_0) \iso 0$, so we see that
    % and, with the condition ``$H(Y) \iso 0$ implies $G(Y) \iso 0$'' coming in handy, we also see that
    \[
        \Hom_{\D'}(Y_0, Y_1) \iso \Hom_{\D'}(Y_0, F(X)) \iso \Hom_{\D}(G(Y_0), X) = 0
    \]
    
    Since $\D$ contains non-trivial objects and $F$ is fully faithful, the category $\D_1'$ must contain a non-trivial object, namely an $F$-image of any non-trivial object of $\D$. Since by assumption $\D'$ is indecomposable, the category $\D_0'$ only contains trivial objects. In other words, if $H(Y) \iso 0$ for some object $Y$ of $\D'$, then $Y \iso 0$.
    
    Finally, to show that $F$ is essentially surjective, we prove that the counit $\varepsilon_Y\colon FH(Y) \to Y$ is an isomorphism for every object $Y$ of $\D'$. 
    Once again considering the image of the distinguished triangle \eqref{eq: distinguished triangle of counit} via the functor $H$, we have already established that $H(Z) \iso 0$. The latter implies $Z \iso 0$ and finally, by Lemma \ref{f iso iff cone trivial}, $\varepsilon_Y$ is an isomorphism.
\end{proof}

% \begin{corollary}
%     \label{condition for functor to be an equivalence}
%     Let $F \colon \D \to \D'$ be a fully faithful triangulated functor between triangulated categories $\D$ and $\D'$ with $G \colon \D' \to \D$ simultaneously being its left and right adjoint $G \dashv F \dashv G$. Further assume $\D$ has objects not isomorphic to $0$ and that $\D'$ is indecomposable. Then $F$ is an equivalence.
% \end{corollary}

For the last part of this section let $k$ denote a field.

\begin{definition}
    \label{Definiton of Serre functor}
    Let $\D$ be a triangulated category over $k$ with $\Hom_\D(X, Y)$ being a finite dimensional $k$-vector space for all objects $X$ and $Y$ of $\D$. A \emph{Serre functor} is a triangulated autoequivalence $S \colon \D \to \D$ of $\D$, such that for all objects $X$ and $Y$ there exists an isomorphism of $k$-vector spaces
    \[
        \sigma_{X,Y} \colon \Hom_\D(X, Y) \xrightarrow{ \ \sim \ } \Hom_\D(Y, S(X))^*,
    \]
    which is natural in both arguments $X$ and $Y$, thus forming a natural isomorphism of functors $\D^\op \times \D \to \mod{k}$.
    % and the collection of all such isomorphisms, $(\eta_{X,Y})_{X,Y}$ forms a natural in both arguments isomorphism of functors $\D^\op \times \D \to \mod{k}$.
    % forming an isomorphism natural in both arguments $X$ and $Y$.
\end{definition}

\begin{example}
    In Section \ref{Subsection: Derived category of coherent sheaves} we will see that $\derb{X}$ -- the bounded derived category of coherent sheaves on a smooth and projective variety $X$ over $k$ -- comes equipped with a Serre functor owing to the fact that such varieties enjoy Serre duality. 
\end{example}

Whenever a triangulated category $\D$ over a field $k$ is equipped with a Serre functor, we will tacitly assume all the Homs $\Hom_\D(X, Y)$ are finite dimensional $k$-vector spaces for any pair of objects $X$ and $Y$ of $\D$.

\begin{proposition}
    \label{Serre functors commute with equivalences}
    \emph{\cite[\S 1, Lemma 1.30]{huybrechts2006fouriermukai}}
    Let $F \colon \D \to \D'$ be an equivalence of triangulated categories $\D$ and $\D'$ endowed with Serre functors $S_\D$ and $S_{\D'}$, respectively. Then there exists a natural isomorphism of functors 
    \[
        F \circ S_\D \natiso S_{\D'} \circ F.
    \]
\end{proposition}

\begin{proof}
    We will show that $S_\D\inv \circ F\inv \circ S_{\D'} \circ F$ is left adjoint to the identity functor $\id{\D}$. As $\id{\D}$ is already left adjoint to itself, this will show that $S_\D\inv \circ F\inv \circ S_{\D'} \circ F$ and $\id{\D}$ are naturally isomorphic from the uniqueness of adjoints. This is indeed so, since for any two objects $X$, $Y$ of $\D$ we have a chain of isomorphisms, natural in both $X$ and $Y$
    \begin{align*}
        \Hom_\D(S\inv_\D(F\inv(S_{\D'}(F(X)))), Y) 
        & \natiso \Hom_\D(F\inv(S_{\D'}(F(X))), S_\D(Y)) \\
        & \natiso \Hom_\D(Y, F\inv(S_{\D'}(F(X))))^* \\
        & \natiso \Hom_{\D'}(F(Y), S_{\D'}(F(X)))^* \\
        & \natiso \Hom_{\D'}(F(X), (F(Y))) \\
        & \natiso \Hom_{\D}(X, Y). \qedhere
    \end{align*}
    % \begin{align*}
    %     \Hom_{\D'}(F(X), F(S_\D(Y))) &\natiso 
    %     \Hom_{\D}(X, S_{\D'}(Y)) \\
    %     & \natiso \Hom_{\D}(Y, X)^* \\
    %     & \natiso \Hom_{\D'}(F(Y), F(X))^* \\
    %     & \natiso \Hom_{\D'}(F(X), S_{\D'}(F(Y)))^{**} \\
    %     & \natiso \Hom_{\D'}(F(X), S_{\D'}(F(Y))). \qedhere
    % \end{align*} 
\end{proof}

\begin{proposition}
    \label{Serre functors and adjoints}
    \emph{\cite[\S 1, Remark 1.31]{huybrechts2006fouriermukai}}
    Suppose $F \colon \D \to \D'$ is a triangulated functor of triangulated categories $\D$ and $\D'$ endowed with Serre functors $S_\D$ and $S_{\D'}$ respectively. Assume $F$ has a left adjoint $G \dashv F$. Then $S_\D \circ G \circ S_{\D'}\inv$ is right adjoint to $F$.
\end{proposition}

\begin{proof}
    For any two objects $X$ of $\D$ and $Y$ of $\D'$ we compute
    \begin{align*}
        \Hom_{\D'}(F(X),\  Y) &\iso \Hom_{\D'}(Y,\ S_{\D'}(F(X)))^* \\
        &\iso \Hom_{\D'}(S_{\D'}\inv(Y),\ F(X))^* \\
        &\iso \Hom_{\D}(G(S_{\D'}\inv(Y)),\ X)^* \\
        &\iso \Hom_{\D}(X,\ S_{\D}(G(S_{\D'}\inv(Y))))^{**} \\
        &\iso \Hom_{\D}(X,\ S_{\D}(G(S_{\D'}\inv(Y)))).
    \end{align*}
    For this is a chain of natural equivalences of functors in $X$ and $Y$, it follows that
    \[
        F \dashv S_\D \circ G \circ S_{\D'}\inv. \qedhere
    \]
\end{proof}


% ================================================================ %



\subsection{Categories of complexes}
\label{Subsection: Categories of complexes}
In order to define derived categories of a $k$-linear category $\A$ we first introduce the category of complexes and the homotopy category of complexes of $\A$. We will equip the latter with a triangulated structure. We also recall the definition of cohomology of chain complexes and introduce quasi-isomorphisms. Throughout this section $\A$ will be a fixed $k$-linear category with $k$ being either a field or the ring of integers $\Z$. We also mention that we will be using the cohomological indexing convention.

\subsubsection*{{Category of chain complexes}}

By a \emph{chain complex} in $\A$ we mean a collection of objects and morphisms 
\[
    A^\bullet = \left((A^i)_{i \in \Z}, (d^i_A\colon A^i \to A^{i+1})_{i \in \Z}\right),
\] 
where $A^i$ are objects and $d^i$ are morphisms of $\A$, called \emph{differentials}, subject to equations $d^{i+1}\circ d^i = 0$, for all $i \in \Z$. A complex is \emph{bounded from below} (\resp \emph{bounded from above}) if there exists $i_0 \in \Z$ such that $A^i \iso 0$ for all $i \leq i_0$ (\resp $i \geq i_0$). A complex is \emph{bounded} if it is both bounded from below and bounded from above. A \emph{chain map} between two chain complexes $A^\bullet$ and $B^\bullet$ in $\A$ is a collection of morphisms in $\A$
\[
    f^\bullet = (f^i\colon A^i \to B^i)_{i \in \Z},
\]
for which $f^{i+1}\circ d^i_A = d^i_B \circ f^i$ holds for all $i \in \Z$. This may diagrammatically be described by the following commutative ladder.
\[
\begin{tikzcd}
    % https://q.uiver.app/#q=WzAsMTAsWzEsMCwiQV57aS0xfSJdLFszLDAsIkFeaSJdLFs1LDAsIkFee2krMX0iXSxbMSwyLCJCXntpLTF9Il0sWzMsMiwiQl5pIl0sWzUsMiwiQl57aSsxfSJdLFs2LDIsIlxcY2RvdHMiXSxbNiwwLCJcXGNkb3RzIl0sWzAsMCwiXFxjZG90cyJdLFswLDIsIlxcY2RvdHMiXSxbMCwzLCJmXntpLTF9Il0sWzEsNCwiZl5pIl0sWzIsNSwiZl57aSsxfSJdLFswLDEsImRee2ktMX1fQSJdLFsxLDIsImReaV9BIl0sWzQsNSwiZF57aX1fQiJdLFszLDQsImRee2ktMX1fQiJdLFs1LDZdLFsyLDddLFs4LDBdLFs5LDNdXQ==
	\cdots & {A^{i-1}} && {A^i} && {A^{i+1}} & \cdots \\
	\\
	\cdots & {B^{i-1}} && {B^i} && {B^{i+1}} & \cdots
	\arrow[from=1-1, to=1-2]
	\arrow["{d^{i-1}_A}", from=1-2, to=1-4]
	\arrow["{f^{i-1}}", from=1-2, to=3-2]
	\arrow["{d^i_A}", from=1-4, to=1-6]
	\arrow["{f^i}", from=1-4, to=3-4]
	\arrow[from=1-6, to=1-7]
	\arrow["{f^{i+1}}", from=1-6, to=3-6]
	\arrow[from=3-1, to=3-2]
	\arrow["{d^{i-1}_B}", from=3-2, to=3-4]
	\arrow["{d^{i}_B}", from=3-4, to=3-6]
	\arrow[from=3-6, to=3-7]
\end{tikzcd}
\]
% Sometimes we will denote a complex just by $A$, $B$,... insted of $A^\bullet$, $B^\bullet$,... to simplify notation. 

Next we define the \emph{category of chain complexes} in $\A$, denoted by $\com(\A)$, as the following $k$-linear category. 
\begin{center}
    \begin{tabular}{r l}
        \textsl{Objects:} & chain complexes in $\A$. \\
        \textsl{Morphisms:} & $\Hom_{\com(\A)}(A^\bullet, B^\bullet)$ is the set of chain maps $A^\bullet \to B^\bullet$, \\ & equipped with a group structure inherited from $\A$ \\ & by applying operations componentwise.
    \end{tabular}
\end{center}
The composition law is defined componentwise and is clearly associative and bilinear. The identity morphisms $\id{A^\bullet}$ are defined to be $(\id{A^i})_{i \in \Z}$. The complex $\cdots \to 0 \to 0 \to \cdots$ plays the role of the zero object in $\com(\A)$ and the direct sum of complexes $A^\bullet$ and $B^\bullet$ exists and is witnessed by the chain complex
\[
    A^\bullet \oplus B^\bullet = \left( (A^i \oplus B^i)_{i \in \Z}, (d^i_A \oplus d^i_B)_{i \in \Z}\right),
    % \quad \quad \cdots \to A^i \oplus B^i \xrightarrow{d^i_A \oplus d^i_B} A^{i+1} \oplus B^{i+1} \to \cdots,
\]
together with the canonical projection and injection morphisms arising from direct sums componentwise.

Additionally, we define the following full $k$-linear subcategories of $\com(\A)$.
\begin{center}
    \begin{tabular}{c l}
        $\com^+(\A)$ & \emph{Category of complexes bounded below}, consisting of \\ & bounded below complexes in $\A$. \\
        $\com^-(\A)$ & \emph{Category of complexes bounded above}, consisting of \\ & bounded above complexes in $\A$. \\
        $\com^b(\A)$ & \emph{Category of bounded complexes}, consisting of \\ &bounded complexes in $\A$. \\    
    \end{tabular}
\end{center}
\begin{remark}
    Whenever $\A$ is $k$-linear, all the categories of complexes $\com^*(\A)$ become $k$-linear as well in the obvious way.
\end{remark}

On all the categories of complexes mentioned above, we can now define the translation functor
\[
    T\colon \com^*(\A) \to \com^*(\A)
\]  
given by its action on objects and morphisms as follows.

\begin{center}
    \begin{tabular}{r l}
        \textsl{Objects:} & $T(A^\bullet) = A[1]^\bullet$ is the chain complex with $(A[1]^\bullet)^i := A^{i+1}$ \\ & and differentials $d^i_{A[1]} = - d^{i+1}_{A}$. \\
        \textsl{Morphisms:} & For a chain map $f^\bullet\colon A^\bullet \to B^\bullet$ we define $f[1]^\bullet$ to have \\ & component maps $(f[1]^\bullet)^i = f^{i+1}$.
    \end{tabular}
\end{center}
The translation functor $T$ thus acts on a complex $A^\bullet$ by twisting its differential by a sign and shifting it one step to the \emph{left}, which is pictured below.

\[\begin{tikzcd}[row sep = 1.2em]
    % https://q.uiver.app/#q=WzAsMTcsWzAsMSwiQV5cXGJ1bGxldFxcY29sb24iXSxbMCwyLCJBXlxcYnVsbGV0WzFdXFxjb2xvbiJdLFsxLDAsIlxcY2RvdHMiXSxbMywxLCJBXjAiXSxbNCwxLCJBXjEiXSxbMiwxLCJBXnstMX0iXSxbMiwyLCJBXjAiXSxbMywyLCJBXjEiXSxbNCwyLCJBXjIiXSxbNSwxLCJcXGNkb3RzIl0sWzUsMiwiXFxjZG90cyJdLFsxLDEsIlxcY2RvdHMiXSxbMSwyLCJcXGNkb3RzIl0sWzMsMCwiXFx0ZXh0dHR7MH0iXSxbNCwwLCJcXHRleHR0dHsxfSJdLFsyLDAsIlxcdGV4dHR0ey0xfSJdLFs1LDAsIlxcY2RvdHMiXSxbNiw3XSxbNyw4XSxbNSwzXSxbMyw0XSxbNCw5XSxbMTEsNV0sWzEyLDZdXQ==
	& \color{linkcolor}\cdots & {\color{linkcolor}{\mathtt{-1}}} & {\color{linkcolor}\small{\mathtt{0}}} & {\color{linkcolor}\small{\mathtt{1}}} & {\color{linkcolor}\small{\mathtt{2}}} & \color{linkcolor}\cdots \\
	{A^\bullet} & \cdots & {A^{-1}} & {A^0} & {A^1} & {A^2} & \cdots \\
	{A[1]^\bullet} & \cdots & {A^0} & {A^1} & {A^2} & {A^3} & \cdots
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-3, to=2-4]
	\arrow[from=2-4, to=2-5]
	\arrow[from=2-5, to=2-6]
	\arrow[from=2-6, to=2-7]
	\arrow[from=3-2, to=3-3]
	\arrow[from=3-3, to=3-4]
	\arrow[from=3-4, to=3-5]
    \arrow[from=3-5, to=3-6]
    \arrow[from=3-6, to=3-7]
\end{tikzcd}\]

\begin{remark}
    We remark that the translation functor $T$ is clearly also $k$-linear, whenever $\A$ is $k$-linear.
\end{remark}

Since $T$ is an auto-equivalence there exists a quasi-inverse $T\inv$ to $T$, which is defined and unique up to a natural isomorphism. We may then speak of $T^{k}$ for any $k \in \Z$, whose action on a complex $A^\bullet$ is described by $(A[k]^\bullet)^i = A^{i + k}$ with differential $d^{i}_{A[k]} = (-1)^k d^{i+k}_A$.

\subsubsection*{Homotopy category of chain complexes}

In this subsection we construct the homotopy category of chain complexes associated to a given $k$-linear category $\A$ and equip it with a triangulated structure. The main motivation for its introduction in this work is the fact that we will later on use it to construct the derived category of $\A$. In particular the homotopy category of $\A$, as opposed to the category of complexes\footnote{It is still possible to construct the derived category of $\A$ without passing through the homotopy category of complexes, however equipping it with a triangulated structure in that case becomes less elegant.} $\com(\A)$, can be enhanced with a triangulated structure which will afterwards descend to the level of derived categories.

\begin{definition}
    Let $f$ and $g$ be two chain maps in $\Hom_{\com(\A)}(A^\bullet, B^\bullet)$. We define $f$ and $g$ to be \emph{homotopic} if there exists a collection of morphisms $\left( h^i\colon A^i \to B^{i-1} \right)_{i \in \Z}$, satisfying
    \[
        f^i - g^i = h^{i+1} \circ d^i_A + d^{i-1}_B \circ h^i
    \] 
    for all $i \in \Z$. The collection of morphisms $(h^i)_{i \in \Z}$ is called a \emph{homotopy}. We write $f \htpy g$ if $f$ and $g$ are homotopic.
    % denote $f^\bullet$ and $g^\bullet$ being homotopic by $f^\bullet \htpy g^\bullet$. 
    \[\begin{tikzcd}
        % https://q.uiver.app/#q=WzAsMTAsWzEsMCwiQV57aS0xfSJdLFszLDAsIkFeaSJdLFs1LDAsIkFee2krMX0iXSxbMSwyLCJCXntpLTF9Il0sWzMsMiwiQl5pIl0sWzUsMiwiQl57aSsxfSJdLFs2LDIsIlxcY2RvdHMiXSxbNiwwLCJcXGNkb3RzIl0sWzAsMCwiXFxjZG90cyJdLFswLDIsIlxcY2RvdHMiXSxbMCwzLCJmXntpLTF9Il0sWzEsNCwiZl5pIl0sWzIsNSwiZl57aSsxfSJdLFswLDEsImRee2ktMX1fQSJdLFsxLDIsImReaV9BIl0sWzQsNSwiZF57aX1fQiJdLFszLDQsImRee2ktMX1fQiJdLFs1LDZdLFsyLDddLFs4LDBdLFs5LDNdLFsxLDMsImheaSJdLFsyLDQsImhee2krMX0iXV0=
        \cdots & {A^{i-1}} && {A^i} && {A^{i+1}} & \cdots \\
        \\
        \cdots & {B^{i-1}} && {B^i} && {B^{i+1}} & \cdots
        \arrow[from=1-1, to=1-2]
        \arrow["{d^{i-1}_A}", from=1-2, to=1-4]
        \arrow["{f^{i-1}}"', from=1-2, to=3-2]
        \arrow["{d^i_A}", from=1-4, to=1-6]
        \arrow["{h^i}"', from=1-4, to=3-2]
        \arrow["{f^i}"', from=1-4, to=3-4]
        \arrow[from=1-6, to=1-7]
        \arrow["{h^{i+1}}"', from=1-6, to=3-4]
        \arrow["{f^{i+1}}"', from=1-6, to=3-6]
        \arrow[from=3-1, to=3-2]
        \arrow["{d^{i-1}_B}", from=3-2, to=3-4]
        \arrow["{d^{i}_B}", from=3-4, to=3-6]
        \arrow[from=3-6, to=3-7]
        \end{tikzcd}\] 
    We say $f$ is \emph{null-homotopic} if $f \htpy 0$.
\end{definition}

\begin{lemma}
    \label{nullhomotopics form a subgroup}
    Let $A^\bullet$, $B^\bullet$ and $C^\bullet$ be complexes in $\com(\A)$ and let $f, f' \in \Hom_{\com(\A)}(A^\bullet, B^\bullet)$ and $g, g' \in \Hom_{\com(\A)}(B^\bullet, C^\bullet)$ be chain maps.
    \begin{enumerate}[label=(\roman*)]
        \item The subset of all null-homotopic chain maps in $A^\bullet \to B^\bullet$ forms a submodule of $\Hom_{\com(\A)}(A^\bullet, B^\bullet)$. \label{nullhomotopic maps are a submodule}
        \item If $f \htpy f'$ and $g \htpy g'$, then $g \circ f \htpy g' \circ f'$. \label{composition and homotopy behave}
        % \info{Pick one notation convention, sometimes its $f$, $f'$, sometimes its $f_0$, $f_1$, ...}
    \end{enumerate}
\end{lemma}

\begin{proof}
    For \ref{nullhomotopic maps are a submodule} see \cite[\S 3, 1.3.1]{milicic-dercat}. Claim \ref{composition and homotopy behave} is a direct consequence of \cite[\S 3, 1.3.2]{milicic-dercat}.
\end{proof}

The homotopy category of complexes in $\A$, denoted by $\kcat{\A}$, is defined to be a $k$-linear category consisting of the following.
\begin{center}
    \begin{tabular}{r l}
        \textsl{Objects:} & chain complexes in $\A$. \\
        \textsl{Morphisms:} & $\Hom_{\kcat{\A}}(A^\bullet, B^\bullet) := \Hom_{\com(\A)}(A^\bullet, B^\bullet)/_\htpy$.
    \end{tabular}
\end{center}
The composition law descends to the quotient by lemma \ref{nullhomotopics form a subgroup} (ii), \ie $[g]\circ[f] := [g \circ f]$, for composable $[f]$ and $[g]$, and for any $A^\bullet$ the identity morphism is defined to be $[\id{A^\bullet}]$. All the Hom-sets $\Hom_{\kcat{\A}}(X, Y)$ are $k$-modules by lemma \ref{nullhomotopics form a subgroup} (i) and compositions are $k$-bilinear maps. The direct sum of two complexes $A^\bullet$ and $B^\bullet$ consists of an object $A^\bullet \oplus B^\bullet$ corresponding to the usual biproduct in $\com(\A)$ together with the homotopy classes of structure maps of its $\com(\A)$-counterpart.

% \vspace*{0.3 cm}

\noindent
\textsc{Triangulated structure on $\kcat{\A}$.}
We now shift\footnote{Pun intended.} our focus to the construction of a triangulated structure on $\kcat{\A}$. The translation functor $T\colon \kcat{\A} \to \kcat{\A}$ is defined on objects and morphisms in the following way.
\begin{center}
    \begin{tabular}{r l}
        \textsl{Objects:} & $A^\bullet \longmapsto A^\bullet[1]$. \\
        \textsl{Morphisms:} & $[f^\bullet] \longmapsto [f[1]^\bullet]$.
    \end{tabular}
\end{center}
This assignment is clearly well defined on morphisms, as $f \htpy f'$ implies $f[1] \htpy f'[1]$.

% \subsubsection*{Mapping cones}
The other piece of data required to obtain a triangulated category is a collection of \emph{distinguished triangles}. To describe what distinguished triangles are in the case of $\kcat{\A}$, we must first introduce the mapping cone of a morphism of complexes and to this end we will for a moment step outside the scope of the homotopy category of complexes back into the category of chain complexes.

\begin{definition}
    \label{Definition of C(f)}
    Let $f\colon A^\bullet \to B^\bullet$ be a morphism of complexes in $\com(\A)$. The complex $C(f)^\bullet$ is specified by the collection of objects
    \[
        C(f)^i := A^{i+1} \oplus B^i
    \]
    and differentials
    \begin{equation}
        \label{eq: cone differential}
        d^i_{C(f)} := \begin{pmatrix}
            -d^{i+1}_A & 0 \\ f^{i+1} & d^i_B
        \end{pmatrix} = \begin{pmatrix}
            d^i_{A[1]} & 0 \\ f[1]^i & d^i_B
        \end{pmatrix},
    \end{equation}
    % \vspace{0.2cm}
    % \[
    %     d^i_{C(f)} \colon A^{i+1} \oplus B^i \to A^{i+2} \oplus B^{i+1}
    % \]
    for all $i \in \Z$, is called the \emph{cone of $f$}.
\end{definition}

\begin{remark}
    % Using matrix notation here might be a bit misleading at first. Formally, matrix \eqref{eq: cone differential} represents the morphism 
    % \[
    %     \left(\langle -d^{i+1}_{A}, 0 \rangle, \langle f^{i+1}, d^i_B \rangle\right) = \left\langle (-d^{i+1}_{A}, f^{i+1}), (0, d^i_B) \right\rangle
    % \]
    % according to our convention for defining morphisms from and into biproducts. 
    A simple matrix calculation, using the fact that $f$ is a chain map and $d_A$, $d_B$ differentials, shows that $C(f)^\bullet$ is indeed a chain complex.
\end{remark}

\begin{remark}
    The naming convention comes from topology, where one can show that the singular chain complex associated to the topological mapping cone $M(f)$ of a continuous map $f\colon X \to Y$ is chain homotopically equivalent to the cone of the chain map induced by $f$ between singular chain complexes of $X$ and $Y$.
\end{remark}

Along with the cone of a chain map $f$, we also introduce two chain maps
\[
    \tau_f \colon B^\bullet \to C(f)^\bullet,
\]
given by the collection $\left( \tau_f^i\colon B^i \to A^{i+1} \oplus B^i \right)_{i \in \Z}$, where $\tau_f^i$ is the canonical injection into the direct sum for all $i \in \Z$, and 
\[
    \pi_f \colon C(f)^\bullet \to A^\bullet[1],
\]
given by the collection $\left( \pi_f^i\colon A^{i+1} \oplus B^i \to A^{i+1} \right)_{i \in \Z}$, where $\pi_f^i$ is the canonical projection from the direct sum for all $i \in \Z$.


\begin{definition}
    \label{distinguished triangles in K(A)}
    We define any triangle in $\kcat{\A}$ isomorphic to a triangle of the form
    \begin{equation}
        \label{eq: model for d.t. in homotopy cat.}
        A^\bullet \xrightarrow{ \ f \ }  B^\bullet \xrightarrow{\ \tau_f \ } C(f)^\bullet \xrightarrow{\ \pi_f \ } A[1]^\bullet
    \end{equation}
    to be distinguished.
\end{definition}

\begin{proposition}
    \label{K(A) is triangulated}
    The homotopy category $\kcat{\A}$ together with the translation functor $T\colon \kcat{\A} \to \kcat{\A}$ and distinguished triangles defined above is a triangulated category.
\end{proposition}

The proof of this proposition, more precisely the verification of axiom \ref{TR2}, relies heavily on the following very technical lemma. This lemma will also be useful later on in the construction of the derived category $\dercat{\A}$.

\begin{lemma}
    \label{rotating triangle lemma}
    Let $f \colon A^\bullet \to B^\bullet$ be a chain map. In notation of Definition \ref{distinguished triangles in K(A)} there exists a homotopy equivalence $g \colon A[1]^\bullet \to C(\tau)$, for which the diagram below commutes in $\kcat{\A}$.
    \begin{equation}
        \label{eq: two triangles isomorphic}
    \begin{tikzcd}[column sep = normal, row sep = 2.5em]
        % https://q.uiver.app/#q=WzAsOCxbMCwwLCJCIl0sWzEsMCwiQyhmKSJdLFsyLDAsIkFbMV0iXSxbMywwLCJCWzFdIl0sWzAsMSwiQiJdLFsxLDEsIkMoZikiXSxbMiwxLCJDKFxcdGF1KSJdLFszLDEsIkJbMV0iXSxbMCwxLCJcXHRhdSJdLFsxLDIsIlxccGkiXSxbMiwzLCItZlsxXSJdLFs0LDUsIlxcdGF1Il0sWzUsNiwiXFx0YXVfXFx0YXUiXSxbNiw3LCJcXHBpX1xcdGF1Il0sWzAsNCwiXFxhbHBoYSIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsNSwiXFxiZXRhIiwyLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMiw2LCJnIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsNywiXFxhbHBoYVsxXSIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
        B^\bullet & {C(f)^\bullet} & {A[1]^\bullet} & {B[1]^\bullet} \\
        B^\bullet & {C(f)^\bullet} & {C(\tau)^\bullet} & {B[1]^\bullet}
        \arrow["\tau", from=1-1, to=1-2]
        \arrow[""', equals, from=1-1, to=2-1]
        \arrow["\pi", from=1-2, to=1-3]
        \arrow[""', equals, from=1-2, to=2-2]
        \arrow["{-f[1]}", from=1-3, to=1-4]
        \arrow["g"', dashed, from=1-3, to=2-3]
        \arrow["{}"', equals, from=1-4, to=2-4]
        \arrow["\tau", from=2-1, to=2-2]
        \arrow["{\tau_\tau}", from=2-2, to=2-3]
        \arrow["{\pi_\tau}", from=2-3, to=2-4]
    \end{tikzcd}
    \end{equation}
\end{lemma}

\begin{proof}
    The morphism $g \colon A[1]^\bullet \to C(\tau)^\bullet$ is defined componentwise by 
    \[
        g^i = 
        % \begin{pmatrix}
        %     -f^{i+1} & \id{A} & 0
        % \end{pmatrix}
        \left(-f^{i+1}, \id{A}, 0\right), 
        \qquad g^i \colon A^{i+1} \longrightarrow B^{i+1} \oplus A^{i+1} \oplus B^i.
    \]
    The computation below then shows that $g$ is a chain map. Indeed, omitting the indexes for clarity we have
    \begin{align*}    
        d^i_{C(\tau)}g^i &= 
        % \left(\begin{smallmatrix}
        %     -d_B^{i+1} & 0 & 0 \\
        %     0 & -d_A^{i+1} & 0 \\
        %     -\id{B} & -f^{i+1} & d_B^{i}
        % \end{smallmatrix}\right)
        \left(\begin{smallmatrix}
            -d_B & 0 & 0 \\
            0 & -d_A & 0 \\
            -\id{B} & -f & d_B
        \end{smallmatrix}\right)
        \left(\begin{smallmatrix}
            -f^{} \\
            \id{A} \\
            0
        \end{smallmatrix}\right) 
        =
        \left(\begin{smallmatrix}
            d_B f \\
            -d_A \\
            0
        \end{smallmatrix}\right)
        = 
        \left(\begin{smallmatrix}
            f d_A \\
            -d_A \\
            0
        \end{smallmatrix}\right)
        =
        \left(\begin{smallmatrix}
            f \\
            \id{A} \\
            0
        \end{smallmatrix}\right) d_{A[1]}
        = g^{i+1} d^i_{A[1]}.
    \end{align*}
    Next we will show that the projection $p \colon C(\tau)^\bullet \to A[1]^\bullet$, given by
    % The homotopic inverse to $g$ is defined to be the projection onto the $A^\bullet$ component, namely $p \colon C(\tau)^\bullet \to A[1]^\bullet$, given by
    \[
        p^i = \left(0, \id{A}, 0\right), \qquad p^i \colon B^{i+1} \oplus A^{i+1} \oplus B^{i} \longrightarrow A^{i+1}
    \]
    is a homotopy inverse to $g$.
    This is a left inverse to $g$ already in $\com(\A)$, so we only need to check $g \circ p \htpy \id{C(\tau)}$. One computes that $g^i \circ p^i - \id{C(\tau)}$ is represented by a matrix
    \[
        \left(\begin{smallmatrix}
            -\id{B} & -f^{i+1} & 0 \\
            0 & 0 & 0 \\
            0 & 0 & -\id{B}
        \end{smallmatrix}\right)
    \]
    and that the collection $(h^i \colon C(\tau)^i \to C(\tau)^{i-1})_{i \in \Z}$, given by
    \[
        h^i = \left(\begin{smallmatrix}
            0 & 0 & \id{B} \\
            0 & 0 & 0 \\
            0 & 0 & 0
        \end{smallmatrix}\right)
    \]
    is the homotopy witnessing $g \circ p - \id{C(\tau)} \htpy 0$. It is left to show that the diagram \eqref{eq: two triangles isomorphic} commutes in $\kcat{\A}$. Clearly the leftmost square commutes and we  have $-f[1] = \pi_\tau \circ g$ already in $\com(\A)$, so the rightmost square commutes as well. Lastly, we have $p \circ \tau_\tau = \pi$ in $\com(\A)$ thus post-composing both sides with $g$ gives $\tau_\tau \htpy g \circ p \circ \tau_\tau = g \circ \pi$, making the middle square also commutative, only now in $\kcat{\A}$.
\end{proof}

\begin{remark}
    The above proposition is particularly important because it tells us that the rotated triangle \eqref{eq: model for d.t. in homotopy cat.}, namely
    \begin{equation}
        \label{eq: rotated model triangle}
        B^\bullet \xrightarrow{\ \tau_f \ } C(f)^\bullet \xrightarrow{\ \pi_f \ } A[1]^\bullet \xrightarrow{-f[1]} B[1]^\bullet
    \end{equation}
    is also distinguished in $\kcat{\A}$.
\end{remark}

\begin{proof}[Proof of Proposition \ref{K(A) is triangulated}]
    % \info{Very detailed proof is given in \cite[Ch.~3, 2.1.]{milicic-dercat}}
    Omitting \ref{TR4}, we verify the axioms \ref{TR1}--\ref{TR3} of Definition \ref{Definition of triangulated cat} one by one. 

    % \vspace{0.15cm}
    \noindent
    \ref{TR1}\ref{TR1 i} is true by definition. For \ref{TR1}\ref{TR1 ii} we see that for any complex $A^\bullet$ of $\kcat{\A}$, we have $C(\id{A})^\bullet \htpy 0$. This is seen to be true by constructing a homotopy witnessing $\id{C(\id{A})} \htpy 0$. It is not difficult to verify that the homotopy $h^i \colon A^{i+1} \oplus A^i \to A^i \oplus A^{i-1}$ given by $\left(\begin{smallmatrix}
        0 & \id{A^i} \\
        0 & 0
    \end{smallmatrix}\right)$ for all $i \in \Z$ achieves this. Axiom \ref{TR1}\ref{TR1 iii} holds also by definition, since any $f \colon A^\bullet \to B^\bullet$ may be extended to a distinguished triangle via its cone. 

    % \vspace{0.15cm}
    \noindent
    \ref{TR2}. Assuming 
    \[
        A^\bullet \xrightarrow{\ f\ } B^\bullet \xrightarrow{\ g\ } C^\bullet \xrightarrow{\ h\ } A[1]^\bullet
    \] 
    is distinguished, it is isomorphic to a triangle of the form \eqref{eq: model for d.t. in homotopy cat.}. 
    % Without loss of generality we may show the axiom holds only for triangles of the form \eqref{eq: model for d.t. in homotopy cat.}.
    Lemma \ref{rotating triangle lemma} asserts that \eqref{eq: rotated model triangle} is distinguished, therefore triangle $B^\bullet \to C^\bullet \to A[1]^\bullet \to B[1]^\bullet$ is as well. For the opposite implication, if the former triangle is distinguished, rotating it twice more shows that 
    % $A[1]^\bullet \to B[1]^\bullet \to C[1]^\bullet \to A[2]^\bullet$
    \[
        A[1]^\bullet \xrightarrow{-f[1]} B[1]^\bullet \xrightarrow{-g[1]} C[1]^\bullet \xrightarrow{-h[1]} A[2]^\bullet
    \]
    is distinguished. It is therefore isomorphic to 
    \[
        A[1]^\bullet \xrightarrow{-f[1]} B[1]^\bullet \xrightarrow{} C(-f[1])^\bullet \xrightarrow{} A[2]^\bullet
    \]
    and since $C(f)[1]^\bullet = C(-f[1])^\bullet$, we see that $A^\bullet \to B^\bullet \to C^\bullet \to A[1]^\bullet$ is isomorphic to a triangle of the form \eqref{eq: model for d.t. in homotopy cat.} \ie distinguished.

    % \vspace{0.15cm}
    \noindent
    \ref{TR3}. It suffices to verify this axiom only on distinguished triangles of the form \eqref{eq: model for d.t. in homotopy cat.}. We then have a commutative diagram in $\kcat{\A}$
    \[\begin{tikzcd}[column sep = normal, row sep = 2.5em]
        % https://q.uiver.app/#q=WzAsOCxbMCwwLCJYIl0sWzEsMCwiWSJdLFsyLDAsIloiXSxbMywwLCJYWzFdIl0sWzAsMSwiWCciXSxbMSwxLCJZJyJdLFsyLDEsIlonIl0sWzMsMSwiWCdbMV0iXSxbMCwxXSxbMSwyXSxbMiwzXSxbNCw1XSxbNSw2XSxbNiw3XSxbMCw0LCJcXGFscGhhIiwyXSxbMSw1LCJcXGJldGEiLDJdLFsyLDYsIlxcZ2FtbWEiLDJdLFszLDcsIlxcYWxwaGFbMV0iLDJdXQ==
        A^\bullet_0 & B^\bullet_0 & C(f_0)^\bullet & {A_0[1]^\bullet} \\
        A^\bullet_1 & B^\bullet_1 & C(f_1)^\bullet & {A_1[1]^\bullet,} 
        \arrow["f_0",from=1-1, to=1-2]
        \arrow["u"', from=1-1, to=2-1]
        \arrow[from=1-2, to=1-3]
        \arrow["v"', from=1-2, to=2-2]
        \arrow[from=1-3, to=1-4]
        \arrow["w"', dashed, from=1-3, to=2-3]
        \arrow["{u[1]}"', from=1-4, to=2-4]
        \arrow["f_1", from=2-1, to=2-2]
        \arrow[from=2-2, to=2-3]
        \arrow[from=2-3, to=2-4]
    \end{tikzcd}\]
    where the dashed morphism $w \colon C(f_0)^\bullet \to C(f_1)^\bullet$ is the homotopy class of the chain map $u[1] \oplus v$, given by components
    \[
        u^{i+1} \oplus v^i \colon A^{i+1}_0 \oplus B^i_0 \to A^{i+1}_1 \oplus B^i_1. \qedhere
    \] 

    % \noindent
    % \ref{TR4}. Verification is omitted.
\end{proof}

As in the case of categories of complexes in $\A$, we can also define the following full $k$-linear subcategories of $\kcat{\A}$.
\begin{center}
    \begin{tabular}{c l}
        $\kplus{\A}$ & \emph{Homotopy category of complexes bounded below}, consisting of \\ & bounded below complexes in $\A$. \\
        $\kminus{\A}$ & \emph{Homotopy category of complexes bounded above}, consisting of \\ & bounded above complexes in $\A$. \\
        $\kb{\A}$ & \emph{Homotopy category of bounded complexes}, consisting of \\ &bounded complexes in $\A$. \\    
    \end{tabular}
\end{center}


For convenience we will in practice assume that unless otherwise stated our complexes $A^\bullet$ in $\kplus{\A}$ will be supported in $\N$ \ie we will assume $A^i \iso 0$ for $i < 0$.

\begin{remark}
    By Proposition \ref{triangulated subcategory proposition} all the subcategories $\kplus{\A}$, $\kminus{\A}$, $\kb{\A}$ of $\kcat{\A}$ are triangulated.
    % The proposition still holds true, if we replace $\kcat{\A}$ with any of the categories $\kplus{\A}$, $\kminus{\A}$, $\kb{\A}$.
\end{remark}

% \footnote{More precisely, there is always a fully faithful functor $\A \to \kcat{\A}$ sending an object $A$ to a complex $\cdots \to 0 \to A \to 0 \to \cdots$ concentrated in degree $0$ and a morphism $f\colon A \to B$ to the homotopy class of the chain map defined by $f^0 = f$ and $f^i = 0$, for $i \neq 0$ \cite[Chapter 3, Lemma 1.3.5]{milicic-dercat}.}

Lastly we mention that $\A$ can naturally be seen as a full subcategory of $\kcat{\A}$. This is due to the functor $\A \to \kcat{\A}$, defined by the following action on objects and morphisms, being fully faithful. 
\begin{center}
    \begin{tabular}{r r c l}
        \textsl{Objects:} & $A$ & $\longmapsto$ & $(\cdots \to 0 \to A \to 0 \to \cdots)$. \\
        \textsl{Morphisms:} & $f$ & $\longmapsto$ & $[(f^i)_{i \in \Z}]$, where $f^0 = f$ and $f^i = 0$ for $i \neq 0$.
    \end{tabular}
\end{center}
The proof of this fact is not difficult to verify, yet we skip it for brevity, but leave the interested reader with the reference \cite[\S 3, Lemma 1.3.5]{milicic-dercat} for completeness.

\subsubsection*{Cohomology}

A very important invariant of a chain complex in the homotopy category, which measures the extent to which it fails to be exact, is its cohomology. Here we are no longer assuming $\A$ is just $k$-linear, but also \emph{abelian}, since we will need kernels and cokernels to exist. 
For a chain complex $A^\bullet$ in $\com(\A)$ and $i \in \Z$ we define its \emph{$i$-th cohomology} to be 
\[
    H^i(A^\bullet) := \coker(\im d^{i-1} \to \ker d^{i}).
\]
\begin{remark}
    \label{versions of cohomology}
    A computation with universal properties inside an abelian category shows, that the following are all equivalent ways of defining the cohomology of a complex as well 
    \begin{align*}        
        H^i(A^\bullet) := & \coker(\im d^{i-1} \to \ker d^{i}) \iso \ker(\coker d^{i-1}\to \im d^i) \\ &\iso \coker(A^{i-1} \to \ker d^{i}) \iso \ker(\coker d^{i-1} \to A^{i}).
    \end{align*}
    See \cite[\S 8, Definition 8.3.8.]{kashiwara2006categories}.
\end{remark}

For a morphism of complexes $f^\bullet\colon A^\bullet \to B^\bullet$, one can also define a morphism 
\[
    H^i(f^\bullet) \colon H^i(A^\bullet) \to H^i(B^\bullet)
\]
in $\A$, because $f^\bullet$ induces maps $\im d^{i-1}_A \to \im d^{i-1}_B$ and $\ker d^i_A \to \ker d^i_B$, which fit into the commutative diagram \eqref{eq: diagram for map on cohomology}.
% \begin{equation}
%     \label{eq: diagram for map on cohomology}
%     \begin{tikzcd}[column sep = small, row sep = 1.5em]
%     % https://q.uiver.app/#q=WzAsMTIsWzAsMSwiQV57aS0xfSJdLFsyLDEsIkFeaSJdLFs0LDEsIkFee2krMX0iXSxbMSwzLCJpbSBkXntpLTF9X0EiXSxbMSwyLCJpbWRee2ktMX1fQiJdLFswLDAsIkJee2ktMX0iXSxbMiwwLCJCXmkiXSxbNCwwLCJCXntpKzF9Il0sWzMsMiwiXFxrZXIgZF5pX0IiXSxbMywzLCJcXGtlciBkXmlfQSJdLFsyLDQsIkheaShCXlxcYnVsbGV0KSJdLFsyLDUsIkheaShBXlxcYnVsbGV0KSJdLFswLDNdLFs1LDRdLFs1LDYsImRee2ktMX1fQiJdLFswLDEsImRee2ktMX1fQSJdLFs2LDcsImReaV9CIl0sWzEsMiwiZF5pX0EiXSxbOCw2XSxbOSwxXSxbNCw2XSxbMywxXSxbNCw4XSxbMyw5XSxbOSwyLCIwIiwyXSxbOCw3LCIwIiwwLHsibGFiZWxfcG9zaXRpb24iOjcwfV0sWzExLDEwLCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbOSw4XSxbMyw0XSxbOSwxMV0sWzgsMTBdLFs0LDEwLCIwIiwyLHsibGFiZWxfcG9zaXRpb24iOjcwfV0sWzMsMTEsIjAiLDJdLFswLDVdLFsxLDZdLFsyLDddXQ==
% 	{B^{i-1}} && {B^i} && {B^{i+1}} \\
% 	{A^{i-1}} && {A^i} && {A^{i+1}} \\
% 	& {\im d^{i-1}_B} && {\ker d^i_B} \\
% 	& {\im d^{i-1}_A} && {\ker d^i_A} \\
% 	&& {H^i(B^\bullet)} \\
% 	&& {H^i(A^\bullet)}
% 	\arrow["{d^{i-1}_B}", from=1-1, to=1-3]
% 	\arrow[from=1-1, to=3-2]
% 	\arrow["{d^i_B}", from=1-3, to=1-5]
% 	\arrow[from=2-1, to=1-1]
% 	\arrow[from=2-1, to=4-2]
% 	\arrow[from=2-3, to=1-3]
% 	\arrow[from=2-5, to=1-5]
% 	\arrow[from=3-2, to=1-3]
% 	\arrow[from=3-2, to=3-4]
% 	\arrow["0"'{pos=0.7}, from=3-2, to=5-3]
% 	\arrow[from=3-4, to=1-3]
% 	\arrow["0"{pos=0.7}, from=3-4, to=1-5]
% 	\arrow[from=3-4, to=5-3]
% 	\arrow[from=4-2, to=2-3]
% 	\arrow[from=4-2, to=3-2]
% 	\arrow[from=4-2, to=4-4]
% 	\arrow["0"', from=4-2, to=6-3]
% 	\arrow[from=4-4, to=2-3]
% 	\arrow["0"', from=4-4, to=2-5]
% 	\arrow[from=4-4, to=3-4]
% 	\arrow[from=4-4, to=6-3]
% 	\arrow[dashed, from=6-3, to=5-3]
% 	\arrow["{d^i_A}", from=2-3, to=2-5, crossing over]
% 	\arrow["{d^{i-1}_A}", from=2-1, to=2-3, crossing over]
%     \end{tikzcd}
% \end{equation}
\begin{equation}
    \label{eq: diagram for map on cohomology}
    \begin{tikzcd}[column sep = small, row sep = 2em]
        % https://q.uiver.app/#q=WzAsMTIsWzIsMCwiQV57aS0xfSJdLFs0LDAsIkFeaSJdLFs2LDAsIkFee2krMX0iXSxbMywyLCJpbSBkXntpLTF9X0EiXSxbMSwzLCJpbWRee2ktMX1fQiJdLFswLDEsIkJee2ktMX0iXSxbMiwxLCJCXmkiXSxbNCwxLCJCXntpKzF9Il0sWzMsMywiXFxrZXIgZF5pX0IiXSxbNSwyLCJcXGtlciBkXmlfQSJdLFsyLDUsIkheaShCXlxcYnVsbGV0KSJdLFs0LDQsIkheaShBXlxcYnVsbGV0KSJdLFswLDNdLFs1LDRdLFs1LDYsImRee2ktMX1fQiJdLFswLDEsImRee2ktMX1fQSJdLFs2LDcsImReaV9CIl0sWzEsMiwiZF5pX0EiXSxbOCw2LCJiIiwxXSxbOSwxXSxbNCw2LCJhIiwxXSxbMywxXSxbNCw4XSxbMyw5XSxbOSwyLCIwIiwyLHsibGFiZWxfcG9zaXRpb24iOjgwfV0sWzgsNywiMDEiLDIseyJsYWJlbF9wb3NpdGlvbiI6ODB9XSxbMTEsMTAsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs5LDgsInoiLDFdLFszLDQsInciLDFdLFs5LDExXSxbOCwxMF0sWzQsMTAsIjAiLDIseyJsYWJlbF9wb3NpdGlvbiI6NzB9XSxbMywxMSwiMCIsMix7ImxhYmVsX3Bvc2l0aW9uIjo3MH1dLFswLDVdLFsxLDYsInkiLDFdLFsyLDcsIngiLDFdXQ==
        && {A^{i-1}} && {A^i} && {A^{i+1}} \\
        {B^{i-1}} && {B^i} && {B^{i+1}} \\
        &&& {\im d^{i-1}_A} && {\ker d^i_A} \\
        & {\im d^{i-1}_B} && {\ker d^i_B} \\
        &&&& {H^i(A^\bullet)} \\
        && {H^i(B^\bullet)}
        \arrow["{d^{i-1}_A}", from=1-3, to=1-5]
        \arrow[from=1-3, to=2-1]
        \arrow[from=1-3, to=3-4]
        \arrow["{d^i_A}", from=1-5, to=1-7]
        \arrow["{d^{i-1}_B}"{pos=0.6}, from=2-1, to=2-3]
        \arrow[from=2-1, to=4-2]
        \arrow[from=3-4, to=1-5]
        \arrow[from=3-4, to=3-6]
        \arrow[from=3-4, to=4-2] % "w"{description}, 
        \arrow["0"'{pos=0.7}, from=3-4, to=5-5]
        \arrow[from=3-6, to=1-5]
        \arrow["0"'{pos=0.8}, from=3-6, to=1-7]
        \arrow[from=3-6, to=4-4, crossing over] % "z"{description}, 
        \arrow[from=3-6, to=5-5]
        \arrow[from=4-2, to=2-3, crossing over] % "a"{description}, 
        \arrow[from=4-2, to=4-4]
        \arrow["0"'{pos=0.7}, from=4-2, to=6-3]
        \arrow[from=4-4, to=2-3, crossing over] % "b"{description}, 
        \arrow["0"'{pos=0.8}, from=4-4, to=2-5, crossing over] % 01
        \arrow[from=4-4, to=6-3]
        \arrow[dashed, from=5-5, to=6-3]
        \arrow[from=1-7, to=2-5, crossing over] % "x"{description}, 
        \arrow["{d^i_B}"{pos=0.6}, from=2-3, to=2-5, crossing over]
        \arrow[from=1-5, to=2-3, crossing over] % "y"{description}, 
    \end{tikzcd}
\end{equation}
All the induced morphisms come from universal properties and are as such unique for which the diagram commutes. Thus the assignment
% Since all the induced maps come from universal properties, they are unique for which the diagram commutes and thus the assignment 
\[
    f^\bullet \mapsto H^i(f^\bullet) \colon \Hom_{\com(\A)}(A, B) \to \Hom_\A(H^i(A), H^i(B))
\]
is functorial \ie respects composition and maps identity morphisms to identity morphisms. For the same reasons it is also a $k$-linear homomorphism, showing that
\[
    H^i \colon \com(\A) \to \A
\]
a $k$-linear functor. Due to the following proposition \ref{cohomology of nulhomotopic map}, the $i$-th cohomology functor $H^i$ descends to a well defined $k$-linear functor 
\[
    H^i \colon \kcat{\A} \to \A
\]
on the homotopy category $\kcat{\A}$.

\begin{proposition}
    \label{cohomology of nulhomotopic map}
    Let $f \colon A^\bullet \to B^\bullet$ be a null-homotopic chain map in $\com(\A)$. Then $f$ induces the zero map on cohomology, that is $H^i(f) = 0$ for all $i \in \Z$.
\end{proposition}

\begin{proof}
    As $f$ is null-homotopic, there exists a homotopy $(h^i \colon A^i \to B^{i-1})_{i\in Z}$ such that 
    \[
        f^i =  h^{i+1} d^i_A + d^{i-1}_B  h^i \quad \text{ for all $i \in \Z$.}
    \]
    Let us name the following morphisms from diagram \eqref{eq: diagram for map on cohomology}.
    \begin{center}
        \begin{tabular}{c c}
            $i_A \colon \ker d^i_A \hookrightarrow A^{i}$ & $i_B \colon \ker d^i_B \hookrightarrow B^{i}$ \\
            $\psi_B \colon B^{i-1} \twoheadrightarrow \im d^{i-1}_B$ & $\xi_B \colon \im d^{i-1}_B \to \ker d^i_B$ \\
            $\pi_B \colon \ker d^i_B \twoheadrightarrow H^i(B^\bullet)$ & $\phi \colon \ker d^i_A \to \ker d^i_B$ \\
            % $j_B \colon \im d^{i-1}_B \hookrightarrow B^i$.
        \end{tabular}
    \end{center}
    We compute $i_B \phi = f^i i_A = (h^{i+1}d^i_A + d^{i-1}_Bh^i)i_A = d^{i-1}_B h^i i_A = 
    % j_B \psi_B h^i i_A = 
    i_B \xi_B \psi_B h^i i_A$. Since $i_B$ is a monomorphism, we may cancel it on the left to express $\phi$ as $\xi_B \psi_B h^i i_A$. Then it is clear that $\pi_B \phi = 0$ (as $\pi_B\xi_B = 0$), which means that $0$ is the unique map $H^i(A^\bullet) \to H^i(B^\bullet)$ fitting into the commutative diagram \eqref{eq: diagram for map on cohomology}.
    % \info{ugly but uses only universal properties, no elements}
\end{proof}

\begin{remark}
    The proof of Proposition \ref{cohomology of nulhomotopic map} although technical and not very aesthetically pleasing is worth including, since it showcases a technique confined fully in the context of abelian categories and universal properties. Usually these kinds of results are proven first in the category $\mod{A}$ of $A$-modules and then generalized to arbitrary abelian categories as a consequence of the Freyd--Mitchell embedding theorem. 
\end{remark}

It is very fruitful to consider all the cohomology functors $(H^i)_{i \in \Z}$ at once, as is witnessed by the next proposition. 

\begin{proposition}\textsl{\cite[\S 12, Theorem 12.3.3]{kashiwara2006categories}}
    \label{LES in cohomology}
    Let $0 \to A^\bullet \to B^\bullet \to C^\bullet \to 0$ be a short exact sequence in $\com(\A)$. Then there exists a long exact sequence in $\A$
    \[
        \cdots \to H^i(A^\bullet) \to H^i(B^\bullet) \to H^i(C^\bullet) \to H^{i+1}(A^\bullet) \to \cdots,
    \]
    which is functorial in the short exact sequence.
\end{proposition}

\begin{remark}
    Morphisms $H^i(A^\bullet) \to H^i(B^\bullet)$ and $H^i(B^\bullet) \to H^i(C^\bullet)$ are induced by the corresponding morphisms between complexes. But the existence of a \emph{connecting} morphism $H^i(C^\bullet) \to H^{i+1}(A^\bullet)$ is part of the assertion of the proposition.  
\end{remark}

An elementary observation shows that the translation functor $T$ on $\com(\A)$ gives rise to natural equivalences
%   the following natural equivalence exists
\begin{equation}
    \label{eq: cohomology and translation}
    H^0 \circ T^i \natiso H^{i},
\end{equation}
for all $i \in \Z$.
Hence the long exact sequence of Proposition \ref{LES in cohomology} can be rephrased as 
\[
    \cdots \to H^0(A^\bullet[i]) \to H^0(B^\bullet[i]) \to H^0(C^\bullet[i]) \to H^{0}(A^\bullet[i+1]) \to \cdots.
\]

\begin{proposition}
    \label{Cohomology is cohomological functor on K(A)}
    With respect to the triangulated structure on $\kcat{\A}$ the cohomology functors $H^i$ are cohomological. 
\end{proposition}

\begin{proof}
    % First, it is enough to show only that $H^0$ is cohomological. 
    First, it is enough to show only 
    % that $H^0$ is cohomological and 
    that 
    \[
        H^0(B^\bullet) \to H^0(C(f)^\bullet) \to H^0(A[1]^\bullet)
    \]
    is exact for any distinguished triangle of the form \eqref{eq: model for d.t. in homotopy cat.}. This statement becomes apparent, once we realize that the distinguished triangle yields a short exact sequence 
    \[
        0 \longrightarrow B^\bullet \xrightarrow{ \ \tau_f \ } C(f)^\bullet \xrightarrow{\ \pi_f \ } A[1]^\bullet \longrightarrow 0
    \]
    in $\com(\A)$ to which one then applies proposition \ref{LES in cohomology}.\footnote{Note that we have actually used much less than what the proposition has to offer, in particular not even the existence of the connecting morphism.}

    Now we argue why this is enough to show that all $H^i$ are cohomological. Since every distinguished triangle in $\kcat{\A}$ is isomorphic to a triangle of the form \eqref{eq: model for d.t. in homotopy cat.} we see that the sequence $H^0(B^\bullet) \to H^0(C^\bullet) \to H^0(A[1]^\bullet)$ is exact for any distinguished triangle $A^\bullet \to B^\bullet \to C^\bullet \to A[1]^\bullet$ by functoriality of $H^i$. Rotating the preceding triangle \ie periodically applying axiom \ref{TR2},
    % the translation functor or its quasi-inverse (both preserving distinguishness of triangles by axiom \ref{TR2}),
    shows that $H^0$ is cohomological. Finally, by \eqref{eq: cohomology and translation} clearly all $H^i$ are cohomological. \qedhere


    % We are allowed to make this reduction because of \eqref{eq: cohomology and translation}, the fact that distinguished triangles 
    
    % Since the long exact sequence of proposition \ref{LES in cohomology} is functorial and any distinguished triangle in $\kcat{\A}$ is isomorphic to a triangle of the form $A^\bullet \to B^\bullet \to C(f)^\bullet \to A[1]^\bullet$, we verify only that these triangles induce long exact sequences.
    % % be a distinguished triangle in $\kcat{\A}$. 
    % We will show that 
    % \[
    %     0 \longrightarrow B^\bullet \xrightarrow{ \ \tau_f \ } C(f)^\bullet \xrightarrow{\ \pi_f \ } A[1]^\bullet \longrightarrow 0
    % \]
    % is a short exact sequence in $\com(\A)$. The claim then reduces to 
    % \[
    %     0 \longrightarrow B^i \longrightarrow A^{i+1} \oplus B^i \longrightarrow A^{i+1} \longrightarrow 0
    % \]
    % being a short exact sequence in $\A$ for all $i \in \Z$, but this obviously true. Proposition \ref then 
\end{proof}

To end this section, we introduce a class of morphisms and a class of objects in $\kcat{\A}$, playing a principal role in the sequel.

\begin{definition}
    Let $A^\bullet$ and $B^\bullet$ be objects and $f\colon A^\bullet \to B^\bullet$ a morphism of $\kcat{\A}$.
    \begin{enumerate}[label = (\roman*)]
        \item{Chain complex $A^\bullet$ is said to be \emph{acyclic} if $H^i(A^\bullet)\iso 0$ for all $i \in \Z$.}
        \item Morphism $f$ is a \emph{quasi-isomorphism} if $H^i(f) \colon H^i(A^\bullet) \to H^i(B^\bullet)$ is an isomorphism for all $i \in \Z$.
    \end{enumerate}
\end{definition}

